<?xml version="1.0" encoding="UTF-8"?>
<!--
  
                              An XML Schema:
  Encoded Archival Context - Corporate Bodies, Persons, and Families (EAC-CPF)
  
  See: https://eac.staatsbibliothek-berlin.de/schemata-and-tag-library/
  
  *****************************************************************
  *                                                               *                
  *                            EAC-CPF 2.0                        *
  *                                                               *       
  *****************************************************************
  
  *****************************************************************
  
  EDITORS: Society of American Archivists Technical Subcommittee on Encoded Archival Standards (TS-EAS)
  
  PUBLISHER: Society of American Archivists in collaboration with the Staatsbibliothek zu Berlin
  
  PURPOSE: The EAC-CPF Schema is a communication standard for the description of corporate bodies,
  persons, and families. It is based on the International Council of Archives' International Standard 
  Archival Authority Record For Corporate Bodies, Persons and Families (ISAAR(CPF)). For additional
  documentation on the use of the standard, see the EAC-CPF Tag Library
  (https://eac.staatsbibliothek-berlin.de/schemata-and-tag-library/).
  
  *****************************************************************
  
  This schema has been generated automatically. 
  
  If you would like to contribute to this project, please see:
  https://github.com/SAA-SDT/TS-EAS-subteam-notes/wiki/Contributing-to-the-EAS-standards
  
  Comments, questions, and suggestions may be addressed to: 
  ts-eas@archivists.org
  
  For more information about the EAC-CPF team, see: 
  https://github.com/SAA-SDT/TS-EAS-subteam-notes/wiki/EAC-CPF-Sub-Team 
  
  *****************************************************************
  *****************************************************************
  
-->
<xs:schema xmlns:eac="https://archivists.org/ns/eac/v2"
           xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:xao="http://xerces.apache.org"
           elementFormDefault="qualified"
           xmlns:eac-sia="http://www.san.beniculturali.it/eac-sia"
           targetNamespace="https://archivists.org/ns/eac/v2"
           xmlns="https://archivists.org/ns/eac/v2">
           
   <xs:element name="eac">
      <xs:complexType>
         <xs:sequence>
            <xs:element type="eac:control" name="control"/>
            <xs:choice>
               <xs:element type="eac:cpfDescription" name="cpfDescription"/>
               <xs:element type="eac:multipleIdentities" name="multipleIdentities"/>
            </xs:choice>
         </xs:sequence>
         <xs:attribute name="audience">
            <xs:simpleType>
               <xs:restriction base="xs:token">
                  <xs:enumeration value="external"/>
                  <xs:enumeration value="internal"/>
               </xs:restriction>
            </xs:simpleType>
         </xs:attribute>
         <xs:attribute name="base" type="xs:anyURI"/>
         <xs:attribute name="id" type="xs:ID"/>
         <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
         <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
         <xs:anyAttribute namespace="##other" processContents="lax"/>
                  
         <!-- 0602 0599 0600 0601 'AGENTI/soggetto conservatore' 'Luogo della cultura (SI/NO)' 'Sala di Studio (SI/NO)'
           eac/cpfDescription/@audience
              valori possibili "external" or "internal" su cui vanno rispettivamente mappati i valori SI o NO.
           eac/control/localControl/term/
              Luogo della cultura (SI/NO) NB: se il flag ha valore SI, valorizzare l'elemento <term> con la stringa "Luogo della cultura"; se il valore è NO il campo non si mappa.
              Sala di Studio      (SI/NO) NB: se il flag ha valore SI, valorizzare l'elemento <term> con la stringa "Sala studio"; se il valore è NO il campo non si mappa.
              Tenant (soppresso 241022) identifica un controllo unitario di una responsabilità attribuita (non sempre corrispondente ad un Istituto) cfr: Soprintendenza, soggetti non standardizzati (Regione, …) => traduzione= responsabile tenutario di un ambiente di lavoro
         -->
         <!--
               not(identity[@localType[normalize-space(lower-case(.))='soggettoconservatore']])
         -->
         <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
            xao:message="=&gt;&#xa;eac 0602 0599 0600 &#xa; visibilità e qualifica&#xa; cpfDescription[@audience='internal'] richiede in control/localControl/term uno dei valori&#xa;
Luogo della cultura,
Sala studio."
            test="
                  not(relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']])
                  or
                  not
                  (cpfDescription[normalize-space(lower-case(@audience))='internal']
                   and 
                   (count(control/localControl/term[.='Luogo della cultura'])&gt;0 or
                    count(control/localControl/term[.='sala studio'        ])&gt;0
                   )
                  )
                 "/>
      </xs:complexType>
   </xs:element>
   <xs:complexType name="control">
      <xs:sequence>
         <xs:element type="eac:recordId" name="recordId"/>
         <xs:element type="eac:maintenanceAgency" name="maintenanceAgency"/>
         <xs:element type="eac:maintenanceHistory" name="maintenanceHistory"/>
         <xs:element type="eac:sources" name="sources" minOccurs="0"/>
         <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element type="eac:conventionDeclaration" name="conventionDeclaration"/>
            <xs:element type="eac:languageDeclaration" name="languageDeclaration"/>
            <xs:element type="eac:localControl" name="localControl"/>
            <xs:element type="eac:localTypeDeclaration" name="localTypeDeclaration"/>
            <xs:element type="eac:otherRecordId" name="otherRecordId"/>
            <xs:element type="eac:representation" name="representation"/>
            <xs:element type="eac:rightsDeclaration" name="rightsDeclaration"/>
         </xs:choice>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="base" type="xs:anyURI"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="languageEncoding">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="iso639-1"/>
               <xs:enumeration value="iso639-2b"/>
               <xs:enumeration value="iso639-3"/>
               <xs:enumeration value="ietf-bcp-47"/>
               <xs:enumeration value="otherLanguageEncoding"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="scriptEncoding">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="iso15924"/>
               <xs:enumeration value="otherScriptEncoding"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="dateEncoding">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="iso8601"/>
               <xs:enumeration value="otherDateEncoding"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="countryEncoding">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="iso3166-1"/>
               <xs:enumeration value="otherCountryEncoding"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="repositoryEncoding">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="iso15511"/>
               <xs:enumeration value="otherRepositoryEncoding"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="detailLevel">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="minimal"/>
               <xs:enumeration value="basic"/>
               <xs:enumeration value="extended"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="maintenanceStatus" use="required">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="revised"/>
               <xs:enumeration value="deleted"/>
               <xs:enumeration value="new"/>
               <xs:enumeration value="deletedSplit"/>
               <xs:enumeration value="deletedMerged"/>
               <xs:enumeration value="deletedReplaced"/>
               <xs:enumeration value="cancelled"/>
               <xs:enumeration value="derived"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="publicationStatus">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="approved"/>
               <xs:enumeration value="published"/>
               <xs:enumeration value="inProcess"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      <!-- 0016 0732 0882 1025 Status della scheda obbligatorio
           Lista chiusa: Bozza, In validazione di primo livello, Validata (primo livello), In validazione di secondo livello, Validata (secondo livello), Pubblicata, Copia parallela. -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0016 0732 0882 1025&#xa; control/@eac-sia:status 'Status della scheda' è richiesto con valori:&#xa;
Bozza,
In validazione di primo livello,
Validata (primo livello),
In validazione di secondo livello,
Validata (secondo livello),
Pubblicata,
Copia parallela."
         test="
            @eac-sia:status='Bozza'
         or @eac-sia:status='In validazione di primo livello'
         or @eac-sia:status='Validata (primo livello)'
         or @eac-sia:status='In validazione di secondo livello'
         or @eac-sia:status='Validata (secondo livello)'
         or @eac-sia:status='Pubblicata'
         or @eac-sia:status='Copia parallela'
         "/>
      <!--
      in alternativa localControl[@localType='status']/term per evitare ricorso a namespace locale -->
      <!--
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="&#xa;0016 0732 0882 1025 Status della scheda obbligatorio
control/localControl[@localType='status']/term è richiesto e univoco con valori:
Bozza,
In validazione di primo livello,
Validata (primo livello),
In validazione di secondo livello,
Validata (secondo livello),
Pubblicata,
Copia parallela."
         test="
         (count(localControl[@localType='status']/term)=1)
         and
         (
            normalize-space(lower-case(localControl[normalize-space(lower-case(@localType)='status']/term))='bozza'
         or normalize-space(lower-case(localControl[normalize-space(lower-case(@localType)='status']/term))='in validazione di primo livello'
         or normalize-space(lower-case(localControl[normalize-space(lower-case(@localType)='status']/term))='validata (primo livello)'
         or normalize-space(lower-case(localControl[normalize-space(lower-case(@localType)='status']/term))='in validazione di secondo livello'
         or normalize-space(lower-case(localControl[normalize-space(lower-case(@localType)='status']/term))='validata (secondo livello)'
         or normalize-space(lower-case(localControl[normalize-space(lower-case(@localType)='status']/term))='pubblicata'
         or normalize-space(lower-case(localControl[normalize-space(lower-case(@localType)='status']/term))='copia parallela'
         )
         "/>
         -->
      <!-- 0004 0720 0870 1018
           Acronimo di sistema	obbligatorio non ripetibile	control/localControl[@localType='AcronimoSistema']/term/ -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0004 0720 0870 1018&#xa; control/localControl[@localType='AcronimoSistema']/term/&#xa; 'Acronimo di sistema' è richiesto e univoco"
         test="count(localControl[normalize-space(lower-case(@localType))='acronimosistema']/term)=1 and string-length(normalize-space(localControl[normalize-space(lower-case(@localType))='acronimosistema']/term))>0"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0715 0865 1013&#xa; control/localControl[@localType='Visibilita_FE']/term&#xa; 'Visibilità FE' lista chiusa con valori:&#xa;
Completa,
Non visibile,
Descrizione libera e risorsa protetta (login),
Descrizione protetta e risorsa protetta (login),
Descrizione libera e risorsa riservata (autorizzazione),
Descrizione riservata e risorsa riservata (autorizzazione)."
      test="(count(localControl[@localType[normalize-space(lower-case(.))='visibilita_fe']]/term) = 1)
             and
            (
             every $v in (localControl[@localType[normalize-space(lower-case(.))='visibilita_fe']]/term)
             satisfies 
             (
                 $v='Completa'
              or $v='Non visibile'
              or $v='Descrizione libera e risorsa protetta (login)'
              or $v='Descrizione protetta e risorsa protetta (login)'
              or $v='Descrizione libera e risorsa riservata (autorizzazione)'
              or $v='Descrizione riservata e risorsa riservata (autorizzazione)'
             )
            )
           "/>


   </xs:complexType>
   <xs:complexType name="cpfDescription">
      <xs:sequence>
         <xs:element type="eac:identity" name="identity"/>
         <xs:element type="eac:description" name="description" minOccurs="0"/>
         <xs:element type="eac:relations" name="relations" minOccurs="0"/>
         <xs:element type="eac:alternativeSet" name="alternativeSet" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="base" type="xs:anyURI"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac &#xa; cpfDescription/description/localDescriptions/localDescription[not(@localType)]/term in CONSERVATORE ammette i valori&#xa;
Note alla descrizione,
Osservazioni."
         test="
            not(relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']])
             or
            ( 
             every $v in description/localDescriptions/localDescription[not(@localType)]/term
             satisfies (
                   normalize-space(lower-case($v))='note alla descrizione'
                or normalize-space(lower-case($v))='osservazioni'
             )
            ) 
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac &#xa; cpfDescription/description/localDescriptions/localDescription[not(@localType)]/term ammette il valore 'Osservazioni'."
         test="
            relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
             or
            ( 
             every $v in description/localDescriptions/localDescription[not(@localType)]/term
             satisfies (normalize-space(lower-case($v))='osservazioni')
            ) 
         "/>
         
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac &#xa; valore non atteso o assente per CONSERVATORE in cpfDescription/description/generalContext/@localType"
         test="
            not (
             descriptions/relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
            )
            or
            (
             every $v in (description/generalContext)
             satisfies (
              $v/@localType
               and
              ( 
                  normalize-space(lower-case($v/@localType))='descrizionepatrimonio'
               or normalize-space(lower-case($v/@localType))='politichegestioneacquisizione'
              )
             )
            )
           "/>
           
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac &#xa; valore non atteso o assente per CONTESTO STORICO ISTITUZIONALE in cpfDescription/description/generalContext/@localType"
         test="
            not (
             identity/entityType[@value='corporateBody']
              and
             identity[normalize-space(lower-case(@localType))='contestostoricoistituzionale']
            )
            or
            (
             every $v in (description/generalContext)
             satisfies (
              $v/@localType
               and
              normalize-space(lower-case($v/@localType))='descrizionecsi'
             )
            )
           "/>

      <!-- eac 0042 ENTE eac/cpfDescription/identity/entityType[@value='corporateBody']
           CONDIZIONE GIURIDICA eac/cpfDescription/description/legalStatuses/legalStatus/term/
           Lista chiusa: Ente di culto, Ente privato, Ente pubblico -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0042&#xa; cpfDescription/description/legalStatuses/legalStatus/term&#xa; 'Condizione giuridica' lista chiusa con valori:&#xa;
Ente di culto,
Ente privato,
Ente pubblico."
         test="
            every $v in .[identity/entityType[@value='corporateBody']]
                         /description/legalStatuses/legalStatus/term
            satisfies 
            (
                $v='Ente di culto'
             or $v='Ente privato'
             or $v='Ente pubblico'
            )
         "/>
         
      <!-- 
      entità                                           relations/relation[targetRole[.='Complesso Archivistico']]/relationType         
      |                                                |                       identity/entityType/@eac-sia:tipoLocale                 
      |                                                |                       |         identity/entityType/@value (required)         
      |                                                |                       |         |               identity/@localType           
      |                                                |                       |         |               |                             
      | produttore(ente/famiglia/persona)              | soggetto produttore   | [empty] | [don’t care]  | [empty]                     
      | conservatore(ente/famiglia/persona)            | soggetto conservatore | [empty] | [don’t care]  | [empty]                     
      | ente/famiglia/persona(produttore/conservatore) | [don’t care]          | [empty] | [don’t care]  | [empty]                     
      | contesto storico istituzionale                 | [forbidden]           | [empty] | corporateBody | ContestoStoricoIstituzionale
      | profilo istituzionale                          | [forbidden]           | [empty] | corporateBody | ProfiloIstituzionale        
      | evento                                         | [forbidden]           | Evento? | corporateBody | evento?                     
      -->
      <!-- RELAZIONI
      produttore e conservatore(ente/famiglia/persona)
         not(identity/@localType)
          and
         not(identity/entityType/@eac-sia:tipoLocale)
          and
         relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
          and
         relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
         
         relations/relation/targetEntity/@targetType  relations/relation/targetRole
          corporateBody/family/person                  Soggetto produttore collegato
          corporateBody                                Profilo istituzionale collegato
          corporateBody/family/person                  Soggetto conservatore collegato
          resource                                     Risorsa digitale collegata
          resource                                     Complesso Archivistico
          resource                                     Unita Archivistica
          resource                                     Unita Documentaria
          resource                                     Strumento di ricerca
          resource                                     Progetto
          function                                     Evento
          agent                                        Contesto storico istituzionale collegato
          resource                                     Tematismo
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0533 0553 0573 0644 0666 0689 0426 0450 0473 0496 0500 0504 0507 0527 SOGGETTO PRODUTTORE E CONSERVATORE relations/relation&#xa;
targetEntity/@targetType    | targetRole&#xa;
----------------------------|--------------------------------------------------------------&#xa;
corporateBody/family/person | Soggetto produttore collegato&#xa;
corporateBody               | Profilo istituzionale collegato&#xa;
corporateBody/family/person | Soggetto conservatore collegato&#xa;
resource                    | Risorsa digitale collegata&#xa;
resource                    | Complesso Archivistico&#xa;
resource                    | Unita Archivistica&#xa;
resource                    | Unita Documentaria&#xa;
resource                    | Strumento di ricerca&#xa;
resource                    | Progetto&#xa;
function                    | Evento&#xa;
agent                       | Contesto storico istituzionale collegato&#xa;
resource                    | Tematismo&#xa;
         "
         test="
         not
         (
          not(identity/@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
           and
          not(identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
           and
          relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto produttore']]
           and
          relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
         )
         or
         (
          (
           every $v in relations/relation/targetRole satisfies
           (
               normalize-space(lower-case($v))='soggetto produttore collegato'
            or normalize-space(lower-case($v))='profilo istituzionale collegato'
            
            or normalize-space(lower-case($v))='soggetto conservatore collegato'
            
            or normalize-space(lower-case($v))='risorsa digitale collegata'
            or normalize-space(lower-case($v))='complesso archivistico'
            or normalize-space(lower-case($v))='unita archivistica'
            or normalize-space(lower-case($v))='unita documentaria'
            or normalize-space(lower-case($v))='strumento di ricerca'
            or normalize-space(lower-case($v))='progetto'
            or normalize-space(lower-case($v))='evento'
            or normalize-space(lower-case($v))='contesto storico istituzionale collegato'
            or normalize-space(lower-case($v))='tematismo'
           )
          )
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='soggetto produttore collegato'                                ]]/targetEntity/@targetType satisfies ($v = 'corporateBody' or $v = 'family' or $v = 'person'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='profilo istituzionale collegato'                              ]]/targetEntity/@targetType satisfies ($v = 'corporateBody'))
          
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='soggetto conservatore collegato'                              ]]/targetEntity/@targetType satisfies ($v = 'corporateBody' or $v = 'family' or $v = 'person'))
          
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='risorsa digitale collegata'                                   ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico'                                       ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='unita archivistica'                                           ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='unita documentaria'                                           ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='strumento di ricerca'                                         ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='progetto'                                                     ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='evento'                                                       ]]/targetEntity/@targetType satisfies ($v = 'function'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='contesto storico istituzionale collegato'                     ]]/targetEntity/@targetType satisfies ($v = 'agent'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='tematismo'                                                    ]]/targetEntity/@targetType satisfies ($v = 'resource'))
         ) 
         "/>
      <!--
      produttore(ente/famiglia/persona)
         not(identity/@localType)
          and
         not(identity/entityType/@eac-sia:tipoLocale)
          and
         relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto produttore']]
          and
         not 
         (
          relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
         )
         
         relations/relation/targetEntity/@targetType  relations/relation/targetRole
          corporateBody/family/person                  Soggetto produttore collegato
          corporateBody                                Profilo istituzionale collegato
          resource                                     Risorsa digitale collegata
          resource                                     Complesso Archivistico
          resource                                     Unita Archivistica
          resource                                     Unita Documentaria
          resource                                     Strumento di ricerca
          resource                                     Progetto
          function                                     Evento
          agent                                        Contesto storico istituzionale collegato
          resource                                     Tematismo
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0533 0553 0573 0689 0426 0450 0473 0496 0500 0504 0507 0527 SOGGETTO PRODUTTORE relations/relation&#xa;
targetEntity/@targetType    | targetRole&#xa;
----------------------------|------------------------------------------------------------&#xa;
corporateBody/family/person | Soggetto produttore collegato&#xa;
corporateBody               | Profilo istituzionale collegato&#xa;
resource                    | Risorsa digitale collegata&#xa;
resource                    | Complesso Archivistico&#xa;
resource                    | Unita Archivistica&#xa;
resource                    | Unita Documentaria&#xa;
resource                    | Strumento di ricerca&#xa;
resource                    | Progetto&#xa;
function                    | Evento&#xa;
agent                       | Contesto storico istituzionale collegato&#xa;
resource                    | Tematismo&#xa;
         "
         test="
         not
         (
          not(identity/@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
           and
          not(identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
           and
          relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto produttore']]
           and
          not 
          (
           relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
          )
         )
         or
         (
          (
           every $v in relations/relation/targetRole satisfies
           (
               normalize-space(lower-case($v))='soggetto produttore collegato'
            or normalize-space(lower-case($v))='profilo istituzionale collegato'
            
            or normalize-space(lower-case($v))='risorsa digitale collegata'
            or normalize-space(lower-case($v))='complesso archivistico'
            or normalize-space(lower-case($v))='unita archivistica'
            or normalize-space(lower-case($v))='unita documentaria'
            or normalize-space(lower-case($v))='strumento di ricerca'
            or normalize-space(lower-case($v))='progetto'
            or normalize-space(lower-case($v))='evento'
            or normalize-space(lower-case($v))='contesto storico istituzionale collegato'
            or normalize-space(lower-case($v))='tematismo'
           )
          )
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='soggetto produttore collegato'                              ]]/targetEntity/@targetType satisfies ($v = 'corporateBody' or $v = 'family' or $v = 'person'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='profilo istituzionale collegato'                            ]]/targetEntity/@targetType satisfies ($v = 'corporateBody'))
          
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='risorsa digitale collegata'                                 ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico'                                     ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='unita archivistica'                                         ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='unita documentaria'                                         ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='strumento di ricerca'                                       ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='progetto'                                                   ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='evento'                                                     ]]/targetEntity/@targetType satisfies ($v = 'function'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='contesto storico istituzionale collegato'                   ]]/targetEntity/@targetType satisfies ($v = 'agent'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='tematismo'                                                  ]]/targetEntity/@targetType satisfies ($v = 'resource'))
         ) 
         "/>
      <!--
      conservatore(ente/famiglia/persona)
         not(identity/@localType)
          and
         not(identity/entityType/@eac-sia:tipoLocale)
          and
         relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
          and
         not 
         (
          relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto produttore']]
         )
         
         relations/relation/targetEntity/@targetType  relations/relation/targetRole
          corporateBody/family/person                  Soggetto conservatore collegato
          resource                                     Risorsa digitale collegata
          resource                                     Complesso Archivistico
          resource                                     Unita Archivistica
          resource                                     Unita Documentaria
          resource                                     Strumento di ricerca
          resource                                     Progetto
          function                                     Evento
          agent                                        Contesto storico istituzionale collegato
          resource                                     Tematismo
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0644 0666 0689 0426 0450 0473 0496 0500 0504 0507 0527 SOGGETTO CONSERVATORE relations/relation&#xa;
targetEntity/@targetType    | targetRole&#xa;
----------------------------|--------------------------------------------------------------&#xa;
corporateBody/family/person | Soggetto conservatore collegato&#xa;
resource                    | Risorsa digitale collegata&#xa;
resource                    | Complesso Archivistico&#xa;
resource                    | Unita Archivistica&#xa;
resource                    | Unita Documentaria&#xa;
resource                    | Strumento di ricerca&#xa;
resource                    | Progetto&#xa;
function                    | Evento&#xa;
agent                       | Contesto storico istituzionale collegato&#xa;
resource                    | Tematismo&#xa;
         "
         test="
         not
         (
          not(identity/@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
           and
          not(identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
           and
          relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
           and
          not 
          (
           relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto produttore']]
          )
         )
         or
         (
          (
           every $v in relations/relation/targetRole satisfies
           (
               normalize-space(lower-case($v))='soggetto conservatore collegato'
            
            or normalize-space(lower-case($v))='risorsa digitale collegata'
            or normalize-space(lower-case($v))='complesso archivistico'
            or normalize-space(lower-case($v))='unita archivistica'
            or normalize-space(lower-case($v))='unita documentaria'
            or normalize-space(lower-case($v))='strumento di ricerca'
            or normalize-space(lower-case($v))='progetto'
            or normalize-space(lower-case($v))='evento'
            or normalize-space(lower-case($v))='contesto storico istituzionale collegato'
            or normalize-space(lower-case($v))='tematismo'
           )
          )
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='soggetto conservatore collegato'                              ]]/targetEntity/@targetType satisfies ($v = 'corporateBody' or $v = 'family' or $v = 'person'))
          
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='risorsa digitale collegata'                                   ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico'                                       ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='unita archivistica'                                           ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='unita documentaria'                                           ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='strumento di ricerca'                                         ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='progetto'                                                     ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='evento'                                                       ]]/targetEntity/@targetType satisfies ($v = 'function'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='contesto storico istituzionale collegato'                     ]]/targetEntity/@targetType satisfies ($v = 'agent'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='tematismo'                                                    ]]/targetEntity/@targetType satisfies ($v = 'resource'))
         ) 
         "/>
      <!--
      ente/famiglia/persona
         not(identity/@localType)
          and
         not(identity/entityType/@eac-sia:tipoLocale)
         
         relations/relation/targetEntity/@targetType  relations/relation/targetRole
          resource                                     Risorsa digitale collegata
          resource                                     Complesso Archivistico
          resource                                     Unita Archivistica
          resource                                     Unita Documentaria
          resource                                     Strumento di ricerca
          resource                                     Progetto
          function                                     Evento
          agent                                        Contesto storico istituzionale collegato
          resource                                     Tematismo
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0689 0426 0450 0473 0496 0500 0504 0507 0527 AGENTE né PRODUTTORE né CONSERVATORE relations/relation&#xa;
targetEntity/@targetType | targetRole&#xa;
-------------------------|-----------------------------&#xa;
resource                 | Risorsa digitale collegata&#xa;
resource                 | Complesso Archivistico&#xa;
resource                 | Unita Archivistica&#xa;
resource                 | Unita Documentaria&#xa;
resource                 | Strumento di ricerca&#xa;
resource                 | Progetto&#xa;
function                 | Evento&#xa;
agent                    | Contesto storico istituzionale collegato&#xa;
resource                 | Tematismo&#xa;
         "
         test="
         not
         (
          not(identity/@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
           and
          not(identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
           and
          not
          (
           relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']]
            [
             relationType
             [
              normalize-space(lower-case(.))='soggetto produttore'
               or
              normalize-space(lower-case(.))='soggetto conservatore'
             ]
            ]
          )
         )
         or
         (
          (
           every $v in relations/relation/targetRole satisfies
           (
               normalize-space(lower-case($v))='risorsa digitale collegata'
            or normalize-space(lower-case($v))='complesso archivistico'
            or normalize-space(lower-case($v))='unita archivistica'
            or normalize-space(lower-case($v))='unita documentaria'
            or normalize-space(lower-case($v))='strumento di ricerca'
            or normalize-space(lower-case($v))='progetto'
            or normalize-space(lower-case($v))='evento'
            or normalize-space(lower-case($v))='contesto storico istituzionale collegato'
            or normalize-space(lower-case($v))='tematismo'
           )
          )
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='risorsa digitale collegata'              ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico'                  ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='unita archivistica'                      ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='unita documentaria'                      ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='strumento di ricerca'                    ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='progetto'                                ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='evento'                                  ]]/targetEntity/@targetType satisfies ($v = 'function'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='contesto storico istituzionale collegato']]/targetEntity/@targetType satisfies ($v = 'agent'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='tematismo'                               ]]/targetEntity/@targetType satisfies ($v = 'resource'))
         ) 
         "/>
         
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac relations/relation&#xa;
targetEntity/@targetType | relationType&#xa;
-------------------------|-------------&#xa;
agent                    | sameAs&#xa;
         "
         test="
          not (
           not(identity/@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
            and
           not(identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
          )
          or (
           every $v in relations/relation[relationType[normalize-space(lower-case(.))='sameas']]/targetEntity/@targetype satisfies ($v = 'agent')
          ) 
         "/>
         
      <!--
      contesto storico istituzionale
         identity/entityType[@value='corporateBody']
          and
         identity[normalize-space(lower-case(@localType))='contestostoricoistituzionale']
         
         relations/relation/targetEntity/@targetType  relations/relation/targetRole
          agent                                        Agente collegato
          corporateBody                                Profilo istituzionale collegato
          corporateBody                                Contesto storico istituzionale collegato
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0760 0781 0802 0824 CONTESTO STORICO ISTITUZIONALE relations/relation&#xa;
targetEntity/@targetType | targetRole&#xa;
-------------------------|-----------------------------------------------------------------------&#xa;
agent                    | Agente collegato&#xa;
corporateBody            | Profilo istituzionale collegato&#xa;
corporateBody            | Contesto storico istituzionale collegato&#xa;
         "
         test="
         not
         (
          identity/entityType[@value='corporateBody']
           and
          identity[normalize-space(lower-case(@localType))='contestostoricoistituzionale']
         )
         or
         (
          (
           every $v in relations/relation/targetRole satisfies
           (
               normalize-space(lower-case($v))='agente collegato'
            or normalize-space(lower-case($v))='profilo istituzionale collegato'
            or normalize-space(lower-case($v))='contesto storico istituzionale collegato'
           )
          )
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='agente collegato'                                                      ]]/targetEntity/@targetType satisfies ($v = 'agent'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='profilo istituzionale collegato'                                       ]]/targetEntity/@targetType satisfies ($v = 'corporateBody'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='contesto storico istituzionale collegato'                              ]]/targetEntity/@targetType satisfies ($v = 'corporateBody'))
         ) 
         "/>
         
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac CONTESTO STORICO ISTITUZIONALE relations/relation&#xa;
targetEntity/@targetType | relationType&#xa;
-------------------------|-------------&#xa;
corporateBody            | sameAs&#xa;
         "
         test="
          not (
           identity/entityType[@value='corporateBody']
            and
           identity[normalize-space(lower-case(@localType))='contestostoricoistituzionale']
          )
          or (
           every $v in relations/relation[relationType[normalize-space(lower-case(.))='sameas']]/targetEntity/@targetype satisfies ($v = 'corporateBody')
          ) 
         "/>

      <!--
      profilo istituzionale
         identity/entityType[@value='corporateBody']
          and
         identity[normalize-space(lower-case(@localType))='profiloistituzionale']
         
         relations/relation/targetEntity/@targetType  relations/relation/targetRole
          corporateBody                                Soggetto produttore collegato
          corporateBody                                Profilo istituzionale collegato
          corporateBody                                Contesto storico istituzionale collegato
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0910 0931 0952 0973 PROFILO ISTITUZIONALE relations/relation&#xa;
targetEntity/@targetType | targetRole&#xa;
-------------------------|--------------------------------------------------------------&#xa;
corporateBody            | Soggetto produttore collegato&#xa;
corporateBody            | Profilo istituzionale collegato&#xa;
corporateBody            | Contesto storico istituzionale collegato&#xa;
         "
         test="
         not
         (
          identity/entityType[@value='corporateBody']
           and
          identity[normalize-space(lower-case(@localType))='profiloistituzionale']
         )
         or
         (
          (
           every $v in relations/relation/targetRole satisfies
           (
               normalize-space(lower-case($v))='soggetto produttore collegato'
            or normalize-space(lower-case($v))='profilo istituzionale collegato'
            or normalize-space(lower-case($v))='contesto storico istituzionale collegato'
           )
          )
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='soggetto produttore collegato'                                ]]/targetEntity/@targetType satisfies ($v = 'corporateBody'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='profilo istituzionale collegato'                              ]]/targetEntity/@targetType satisfies ($v = 'corporateBody'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='contesto storico istituzionale collegato'                     ]]/targetEntity/@targetType satisfies ($v = 'corporateBody'))
         ) 
         "/>
         
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac PROFILO ISTITUZIONALE relations/relation&#xa;
targetEntity/@targetType | relationType&#xa;
-------------------------|-------------&#xa;
corporateBody            | sameAs&#xa;
         "
         test="
          not (
           identity/entityType[@value='corporateBody']
            and
           identity[normalize-space(lower-case(@localType))='profiloistituzionale']
          )
          or (
           every $v in relations/relation[relationType[normalize-space(lower-case(.))='sameas']]/targetEntity/@targetype satisfies ($v = 'corporateBody')
          ) 
         "/>
         
      <!--
      evento
         identity/entityType[@value='corporateBody']
         and
         (
          identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento']
           or
          identity[normalize-space(lower-case(@localType))='evento']
         )
         
         relations/relation/targetEntity/@targetType  relations/relation/targetRole
          corporateBody/family/person                  Agente collegato
          resource                                     Complesso Archivistico
          resource                                     Unita Archivistica
          resource                                     Unita Documentaria
          resource                                     Tematismo
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 1053 1056 1058 1060 1062 EVENTO relations/relation&#xa;
targetEntity/@targetType    | targetRole&#xa;
----------------------------|-----------------------&#xa;
corporateBody/family/person | Agente collegato&#xa;
resource                    | Complesso Archivistico&#xa;
resource                    | Unita Archivistica&#xa;
resource                    | Unita Documentaria&#xa;
resource                    | Tematismo
         "
         test="
         not
         (
          identity/entityType[@value='corporateBody']
          and
          (
           identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento']
            or
           identity[normalize-space(lower-case(@localType))='evento']
          )
         )
         or
         (
          (
           every $v in relations/relation/targetRole satisfies
           (
              normalize-space(lower-case($v))='agente collegato'
            or normalize-space(lower-case($v))='complesso archivistico'
            or normalize-space(lower-case($v))='unita archivistica'
            or normalize-space(lower-case($v))='unita documentaria'
            or normalize-space(lower-case($v))='tematismo'
           )
          )
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='agente collegato'      ]]/targetEntity/@targetType satisfies ($v = 'corporateBody' or $v = 'family' or $v = 'person'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='unita archivistica'    ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='unita documentaria'    ]]/targetEntity/@targetType satisfies ($v = 'resource'))
          and (every $v in relations/relation[targetRole[normalize-space(lower-case(.))='tematismo'             ]]/targetEntity/@targetType satisfies ($v = 'resource'))
         ) 
         "/>
      
      <!-- /RELAZIONI -->
      
      <!-- LUOGHI
      
       agente ente         place[@localType='LuogoEnte'    ]  placeRole                      => Giurisdizione, Sede
       agente famiglia     place[@localType='LuogoFamiglia']  placeRole                      => Domicilio, Origine, Residenza, Sede di attività
       agente persona      place[@localType='LuogoPersona' ]  placeRole                      => Domicilio, Morte, Nascita, Residenza, Sede di attività
       agente conservatore place[@localType='Contatti'     ]  contact/@localType             => PEC
       agente conservatore place[@localType='Sedi'         ]  placeRole                      => Principale, Consultazione, Privato
                                                              address/addressLine/@localType => Localita/Frazione, IndirizzoTestuale, NoteIndirizzo, AccessoDisabili, Servizi, CondizioniDiAccesso
                                                              dateSet/@localType             => GiorniDiApertura
                                                                                             dateRange/@localType => lunedì, martedì, mercoledì, giovedì, venerdì, sabato, domenica, ?festivi
                                                                                                                  fromDate/@localType => orarioInizio
                                                                                                                  toDate/@localType   => OrarioFine
                                                              date/@localType                => PeriodoDiChiusura
       evento              place[@localType='LuogoEvento'  ]  placeRole                      => ? default è "Luogo evento"
      -->

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac EVENTO valori ammessi per cpfDescription/description/places/place/@localType :
LuogoEvento."
         test="
            not (
             identity/entityType[@value='corporateBody']
              and ( 
              identity[normalize-space(lower-case(@localType))='evento']
               or
              identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento']
             )
            )
            or
            (every $v in description/places/place/@localType satisfies (normalize-space(lower-case($v))='luogoevento'))
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac AGENTE ENTE valori ammessi per cpfDescription/description/places/place/@localType :
LuogoEnte."
         test="
            not (
             identity/entityType[@value='corporateBody']
              and
             not(identity/@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
              and
             not(identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
              and
             not(relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']])
            )
            or
            (every $v in description/places/place/@localType satisfies (normalize-space(lower-case($v))='luogoente'))
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac AGENTE ENTE CONSERVATORE valori ammessi per cpfDescription/description/places/place/@localType :
LuogoEnte,
Contatti,
Sedi."
         test="
            not (
             identity/entityType[@value='corporateBody']
              and
             not(identity/@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
              and
             not(identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
              and
             relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
            )
            or
            (every $v in description/places/place/@localType satisfies (
                normalize-space(lower-case($v))='luogoente'
             or normalize-space(lower-case($v))='contatti'
             or normalize-space(lower-case($v))='sedi'
            ))
         "/>
         
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac AGENTE FAMIGLIA valori ammessi per cpfDescription/description/places/place/@localType :
LuogoFamiglia."
         test="
            not (
             identity/entityType[@value='family']
              and
             not(relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']])
            )
            or
            (every $v in description/places/place/@localType satisfies (normalize-space(lower-case($v))='luogofamiglia'))
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac AGENTE FAMIGLIA CONSERVATORE valori ammessi per cpfDescription/description/places/place/@localType :
LuogoFamiglia,
Contatti,
Sedi."
         test="
            not (
             identity/entityType[@value='family']
              and
             relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
            )
            or
            (every $v in description/places/place/@localType satisfies (
                normalize-space(lower-case($v))='luogofamiglia'
             or normalize-space(lower-case($v))='contatti'
             or normalize-space(lower-case($v))='sedi'
            ))
         "/>
         
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac AGENTE PERSONA valori ammessi per cpfDescription/description/places/place/@localType :
LuogoPersona."
         test="
            not (
             identity/entityType[@value='person']
              and
             not(relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']])
            )
            or
            (every $v in description/places/place/@localType satisfies (normalize-space(lower-case($v))='luogopersona'))
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac AGENTE PERSONA CONSERVATORE valori ammessi per cpfDescription/description/places/place/@localType :
LuogoPersona,
Contatti,
Sedi."
         test="
            not (
             identity/entityType[@value='person']
              and
             relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']]
            )
            or
            (every $v in description/places/place/@localType satisfies (
                normalize-space(lower-case($v))='luogopersona'
             or normalize-space(lower-case($v))='contatti'
             or normalize-space(lower-case($v))='sedi'
            ))
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0124&#xa; cpfDescription/description/existDates/@localType ammette valore&#xa;
DateEsistenzaEnte"
         test="
            not(
             identity/entityType/@value='corporateBody'
              and
             not(identity/@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
              and
             not(identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
            )
            or
            (
             every $v in description/existDates/@localType satisfies(
             normalize-space(lower-case($v))='dateesistenzaente')
            )
         "/>
         
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0215&#xa; cpfDescription/description/existDates/@localType ammette valore&#xa;
DateEsistenzaFamiglia"
         test="
            not(
             normalize-space(lower-case(identity/entityType/@value))='family'
            )
            or
            (
             every $v in description/existDates/@localType satisfies(
             normalize-space(lower-case($v))='dateesistenzafamiglia')
            )
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0335&#xa; cpfDescription/description/existDates/@localType ammette valore&#xa;
DateEsistenzaPersona"
         test="
            not(
             normalize-space(lower-case(identity/entityType/@value))='person'
            )
            or
            (
             every $v in description/existDates/@localType satisfies(
             normalize-space(lower-case($v))='dateesistenzapersona')
            )
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 1050&#xa; cpfDescription/description/functions/function/@localType ammette valore&#xa;
Qualifica"
         test="
            not(
             normalize-space(lower-case(identity/entityType/@value))='person'
            )
            or
            (
             every $v in ddescription/functions/function/@localType satisfies(
             normalize-space(lower-case($v))='qualifica')
            )
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac&#xa; valore non atteso in cpfDescription/description/functions/function/@localType"
         test="
            not(
             not(normalize-space(lower-case(identity/entityType/@value))='person')
            )
            or
            (
             count(description/functions/function[@localType]) = 0
            )
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 1050&#xa; cpfDescription/description/biogHist/@localType ammette valore&#xa;
DescrizioneEvento"
         test="
            not(
             identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento']
            )
            or
            (
             every $v in ddescription/biogHist/@localType satisfies(
             normalize-space(lower-case($v))='descrizioneevento')
            )
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac&#xa; valore non atteso in cpfDescription/description/biogHist/@localType"
         test="
            not(
             not(identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
            )
            or
            (
             count(description/biogHist[@localType]) = 0
            )
         "/>

      <!-- eac 0124 ENTE eac/cpfDescription/identity/entityType[@value='corporateBody']
           Qualifica della data eac/cpfDescription/description/existDates[@localType='DateEsistenzaEnte']/dateSet/date/@eac-sia:qualificaData
           OBBLIGATORIO
             identity[entityType/@value='corporateBody' and not(@localType) and not(entityType/@eac-sia:tipoLocale)]
           -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0124&#xa; cpfDescription/description/existDates[@localType='DateEsistenzaEnte']/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData&#xa; 'Qualifica della data' è richiesto"
         test="
            not(
             identity/entityType/@value='corporateBody'
              and
             not(identity/@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
              and
             not(identity/entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
            )
            or
            (
             count(description/existDates[normalize-space(lower-case(@localType))='dateesistenzaente']/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData[string-length(normalize-space(.)) &gt; 0]) &gt; 0
            )
         "/>
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0215&#xa; cpfDescription/description/existDates[@localType='DateEsistenzaFamiglia']/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData&#xa; 'Qualifica della data' è richiesto"
         test="
            not(normalize-space(lower-case(identity/entityType/@value))='family')
            or
            (
             count(description/existDates[normalize-space(lower-case(@localType))='dateesistenzafamiglia']/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData[string-length(normalize-space(.)) &gt; 0]) &gt; 0
            )
         "/>
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0335&#xa; cpfDescription/description/existDates[@localType='DateEsistenzaPersona']/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData&#xa; 'Qualifica della data' è richiesto"
         test="
            not(normalize-space(lower-case(identity/entityType/@value))='person')
            or
            (
             count(description/existDates[normalize-space(lower-case(@localType))='dateesistenzapersona']/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData[string-length(normalize-space(.)) &gt; 0]) &gt; 0
            )
         "/>
         
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0397&#xa; cpfDescription/description/occupations/occupation/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData&#xa; 'Qualifica della data' lista chiusa con valori:&#xa;
Inizio attività - professione,
Fine attività – professione."
         test="
            not(normalize-space(lower-case(identity/entityType/@value))='person')
            or 
            (
             every $v in (description/occupations/occupation/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData)
             satisfies
             (
                 $v='Inizio attività - professione'
              or $v='Fine attività – professione'
             )
            )
         "/>
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0397&#xa; cpfDescription/description/functions/function/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData&#xa; 'Qualifica della data' lista chiusa con valori:&#xa;
Inizio qualifica,
Fine qualifica."
         test="
            not(normalize-space(lower-case(identity/entityType/@value))='person')
            or 
            (
             every $v in (description/functions/function/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData)
             satisfies
             (
                 $v='Inizio qualifica'
              or $v='Fine qualifica'
             )
            )
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0239 &#xa;cpfDescription/description/localDescriptions/localDescription[@localType='TitoloFamiglia']/term&#xa; 'Titolo' lista chiusa con valori:&#xa;
Barone,
Cavaliere,
Conte,
Duca,
Granduca,
Imperatore,
Marchese,
Nobile,
Nobile di città,
Patrizio,
Principe,
Re,
Signore,
Visconte."
         test="
            not(normalize-space(lower-case(identity/entityType/@value))='family')
            or 
            (
             every $v in (description/localDescriptions/localDescription[normalize-space(lower-case(@localType))='titolofamiglia']/term)
             satisfies
             (
                 $v='Barone'
              or $v='Cavaliere'
              or $v='Conte'
              or $v='Duca'
              or $v='Granduca'
              or $v='Imperatore'
              or $v='Marchese'
              or $v='Nobile'
              or $v='Nobile di città'
              or $v='Patrizio'
              or $v='Principe'
              or $v='Re'
              or $v='Signore'
              or $v='Visconte'
             )
            )
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0360 &#xa;cpfDescription/description/localDescriptions/localDescription[@localType='TitoloPersona']/term&#xa; 'Titolo' lista chiusa con valori:&#xa;
Barone,
Cavaliere,
Conte,
Duca,
Granduca,
Imperatore,
Marchese,
Nobile,
Nobile di città,
Patrizio,
Principe,
Re,
Signore,
Visconte."
         test="
            not(normalize-space(lower-case(identity/entityType/@value))='person')
            or 
            (
             every $v in (description/localDescriptions/localDescription[normalize-space(lower-case(@localType))='titolopersona']/term)
             satisfies
             (
                 $v='Barone'
              or $v='Cavaliere'
              or $v='Conte'
              or $v='Duca'
              or $v='Granduca'
              or $v='Imperatore'
              or $v='Marchese'
              or $v='Nobile'
              or $v='Nobile di città'
              or $v='Patrizio'
              or $v='Principe'
              or $v='Re'
              or $v='Signore'
              or $v='Visconte'
             )
            )
         "/>
         
      <!--0612 CONSERVARTORE SEDE Tipologia Lista chiusa: Principale, Consultazione, Privato. -->
      <!--
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0612&#xa; cpfDescription/description/places/place/placeRole/&#xa; 'CONSERVARTORE SEDE Tipologia' lista chiusa con valori:&#xa;
Principale,
Consultazione,
Privato."
         test="
            not(relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']])
            or
            (
             every $v in description/places/place/placeRole
             satisfies
             (
                 normalize-space(lower-case($v))='principale'
              or normalize-space(lower-case($v))='consultazione'
              or normalize-space(lower-case($v))='privato'
             )
            )
         "/>
       -->
       <!-- eac 0803 0825
       cpfDescription
        [identity[@localType="ContestoStoricoIstituzionale"]/entityType[@value="corporateBody"]]
        /relations/relation
        [targetRole[.="Contesto storico istituzionale collegato"]
        [targetEntity[@targetType='corporateBody']
        /relationType 'Qualifica della relazione con altro Contesto' Collegato, Dipendente, Sovraordinato, Precedente, Successivo -->
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0803 0825&#xa; cpfDescription&#xa; 
[identity[@localType='ContestoStoricoIstituzionale']/entityType[@value='corporateBody']]&#xa; 
/relations/relation&#xa; 
[targetRole[.='Contesto storico istituzionale collegato']]&#xa; 
[targetEntity[@targetType='corporateBody]]&#xa; 
/relationType&#xa; 'Qualifica della relazione con altro Contesto' lista chiusa con valori:&#xa;
Collegato,
Dipendente,
Sovraordinato,
Precedente,
Successivo."
           test="not(.
                     [identity[@localType[normalize-space(lower-case(.))='contestostoricoistituzionale']]/entityType[@value='corporateBody']
                     ]
                     /relations/relation
                     [targetRole
                      [
                       normalize-space(lower-case(.))='contesto storico istituzionale collegato'
                      ]
                     ]
                     [targetEntity[@targetType='corporateBody']]
                     /relationType
                     [    .!='Collegato'
                      and .!='Dipendente'
                      and .!='Sovraordinato'
                      and .!='Precedente'
                      and .!='Successivo'
                     ]
                    )"/>

       <!-- eac 0932 0953
       cpfDescription
        [identity[@localType="ProfiloIstituzionale"]/entityType[@value="corporateBody"]]
        /relations/relation
        [targetRole[.="Profilo istituzionale collegato"]
        [targetEntity[@targetType='corporateBody']
        /relationType 'Qualifica della relazione' Predecessore, Successore, Collegato -->
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0803 0825&#xa; cpfDescription&#xa; 
[identity[@localType='ProfiloIstituzionale']/entityType[@value='corporateBody']]&#xa; 
/relations/relation&#xa; 
[targetRole[.='Profilo istituzionale collegato']]&#xa; 
[targetEntity[@targetType='corporateBody]]&#xa; 
/relationType&#xa; 'Qualifica della relazione' lista chiusa con valori:&#xa;
Predecessore,
Successore,
Collegato."
           test="not(.
                     [identity[@localType[normalize-space(lower-case(.))='profiloistituzionale']]/entityType[@value='corporateBody']
                     ]
                     /relations/relation
                     [targetRole
                      [
                       normalize-space(lower-case(.))='profilo istituzionale collegato'
                      ]
                     ]
                     [targetEntity[@targetType='corporateBody']]
                     /relationType
                     [    .!='Predecessore'
                      and .!='Successore'
                      and .!='Collegato'
                     ]
                    )"/>

   </xs:complexType>
   <xs:complexType name="multipleIdentities">
      <xs:sequence>
         <xs:element type="eac:cpfDescription" name="cpfDescription"/>
         <xs:element type="eac:cpfDescription"
                     name="cpfDescription"
                     maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="base" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="recordId">
      <xs:simpleContent>
         <xs:restriction base="xs:anyType">
            <xs:simpleType>
               <xs:restriction base="xs:string">
                  <xs:pattern value="(.|\n|\r)*\S(.|\n|\r)*"/>
               </xs:restriction>
            </xs:simpleType>
            <xs:attribute name="audience">
               <xs:simpleType>
                  <xs:restriction base="xs:token">
                     <xs:enumeration value="external"/>
                     <xs:enumeration value="internal"/>
                  </xs:restriction>
               </xs:simpleType>
            </xs:attribute>
            <xs:attribute name="id" type="xs:ID"/>
            <xs:attribute name="target" type="xs:IDREFS"/>
            <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
            <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
            <xs:anyAttribute namespace="##other" processContents="lax"/>
         </xs:restriction>
      </xs:simpleContent>
   </xs:complexType>
   <xs:complexType name="maintenanceAgency">
      <xs:sequence>
         <xs:choice>
            <xs:sequence>
               <xs:element type="eac:agencyCode" name="agencyCode"/>
               <xs:element type="eac:agencyName"
                           name="agencyName"
                           minOccurs="0"
                           maxOccurs="unbounded"/>
               <xs:element type="eac:otherAgencyCode"
                           name="otherAgencyCode"
                           minOccurs="0"
                           maxOccurs="unbounded"/>
            </xs:sequence>
            <xs:sequence>
               <xs:element type="eac:agencyName" name="agencyName" maxOccurs="unbounded"/>
               <xs:element type="eac:otherAgencyCode"
                           name="otherAgencyCode"
                           minOccurs="0"
                           maxOccurs="unbounded"/>
            </xs:sequence>
         </xs:choice>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="countryCode" type="xs:NMTOKEN"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="maintenanceHistory">
      <xs:sequence>
         <xs:element type="eac:maintenanceEvent"
                     name="maintenanceEvent"
                     maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="sources">
      <xs:sequence>
         <xs:element type="eac:source" name="source" maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="base" type="xs:anyURI"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="conventionDeclaration">
      <xs:sequence>
         <xs:element type="eac:reference" name="reference"/>
         <xs:element type="eac:shortCode" name="shortCode" minOccurs="0"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="languageDeclaration">
      <xs:sequence>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="languageCode" use="required" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptCode" type="xs:NMTOKEN"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="localControl">
      <xs:sequence>
         <xs:element type="eac:term" name="term" maxOccurs="unbounded"/>
         <xs:choice minOccurs="0">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
         </xs:choice>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="localTypeDeclaration">
      <xs:sequence>
         <xs:element type="eac:reference" name="reference"/>
         <xs:element type="eac:shortCode" name="shortCode" minOccurs="0"/>
         <!-- 0004 0720 0870 1018 shortCode obbligatorio, reference non usato (xsd)
         <xs:element type="eac:reference" name="reference" minOccurs="0"/>
         <xs:element type="eac:shortCode" name="shortCode"/> -->
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      
      <!-- 0004 0720 0870 1018 <xs:complexType name="localTypeDeclaration"> name="shortCode"
           Acronimo di sistema	obbligatorio non ripetibile	eac/control/localTypeDeclaration/shortCode/ -->
      <!--  spostato in control/localControl[@localType='AcronimoSistema']/term per evitare obbligatorietà conseguente in localTypeDeclaration/reference
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0004 0720 0870 1018&#xa; eac/control/localTypeDeclaration/shortCode/&#xa; 'Acronimo di sistema' è richiesto e univoco"
         test="count(shortCode)=1 and string-length(normalize-space(shortCode))>0"/>
      -->
   </xs:complexType>
   <xs:complexType name="otherRecordId" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="representation" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="href" type="xs:anyURI"/>
      <xs:attribute name="linkRole" type="xs:anyURI"/>
      <xs:attribute name="linkTitle" type="xs:token"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="rightsDeclaration">
      <xs:sequence>
         <xs:element type="eac:reference" name="reference"/>
         <xs:element type="eac:shortCode" name="shortCode" minOccurs="0"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="identity">
      <xs:sequence>
         <xs:element type="eac:entityType" name="entityType"/>
         <xs:choice maxOccurs="unbounded">
            <xs:element type="eac:nameEntry" name="nameEntry"/>
            <xs:element type="eac:nameEntrySet" name="nameEntrySet"/>
         </xs:choice>
         <xs:element type="eac:otherEntityTypes" name="otherEntityTypes" minOccurs="0"/>
         <xs:element type="eac:identityId"
                     name="identityId"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="base" type="xs:anyURI"/>
      <xs:attribute name="identityType">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="given"/>
               <xs:enumeration value="acquired"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      <!--
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0721 0871&#xa; identity/@localType lista chiusa con valori&#xa;
soggettoProduttore,
soggettoConservatore,
ProfiloIstituzionale,
ContestoStoricoIstituzionale."
         test="not(@localType)
                or 
               (@localType
                [   normalize-space(lower-case(.))='soggettoproduttore'
                 or normalize-space(lower-case(.))='soggettoconservatore'
                 or normalize-space(lower-case(.))='ProfiloIstituzionale'
                 or normalize-space(lower-case(.))='Contestostoricoistituzionale'
                ]
               )"/>
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0721 0871&#xa; identity/@localType ammette i valori&#xa;
ProfiloIstituzionale,
ContestoStoricoIstituzionale."
         test="not(@localType)
                or 
               (@localType
                [   normalize-space(lower-case(.))='profiloistituzionale'
                 or normalize-space(lower-case(.))='contestostoricoistituzionale'
                 or normalize-space(lower-case(.))='evento'
                ]
               )"/>
               
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0062 0063 0064 &#xa; agente ente ammette in identity/nameEntry[@localType='DenominazioneEnte']/part/@localType i valori&#xa;
IntestazionePrincipaleEnte,
DenominazionePrincipaleEnte,
AcronimoEnte."
         test="not (
                entityType/@value='corporateBody'
                 and
                not(@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
                 and
                not(entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
               )
                or 
               (
                every $v in nameEntry[normalize-space(lower-case(@localType))='denominazioneente']/part/@localType
                satisfies
                (   normalize-space(lower-case($v))='intestazioneprincipaleente'
                 or normalize-space(lower-case($v))='denominazioneprincipaleente'
                 or normalize-space(lower-case($v))='acronimoente'
                )
               )"/>
               
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0062 0063 0064 0085 0086 0087 0089 &#xa; agente ente ammette in identity/nameEntry/@localType i valori&#xa;
DenominazioneEnte,
AltraDenominazioneEnte."
         test="not (
                entityType/@value='corporateBody'
                 and
                not(@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
                 and
                not(entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
               )
                or 
               (
                every $v in nameEntry/@localType
                satisfies
                (   normalize-space(lower-case($v))='denominazioneente'
                 or normalize-space(lower-case($v))='altradenominazioneente'
                )
               )"/>
               
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0085 0086 0087 0089 &#xa; agente ente ammette in identity/nameEntry[@localType='AltraDenominazioneEnte']/part/@localType i valori&#xa;
AltraIntestazione,
AltraDenominazione,
AltroAcronimo,
Qualifica."
         test="not (
                entityType/@value='corporateBody'
                 and
                not(@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
                 and
                not(entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
               )
                or 
               (
                every $v in nameEntry[normalize-space(lower-case(@localType))='altradenominazioneente']/part/@localType
                satisfies
                (   normalize-space(lower-case($v))='altraintestazione'
                 or normalize-space(lower-case($v))='altradenominazione'
                 or normalize-space(lower-case($v))='altroacronimo'
                 or normalize-space(lower-case($v))='qualifica'
                )
               )"/>
               
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0154 0155 &#xa; agente famiglia ammette in identity/nameEntry[@localType='DenominazioneFamiglia']/part/@localType i valori&#xa;
IntestazionePrincipaleFamiglia,
DenominazionePrincipaleFamiglia."
         test="not(entityType/@value='family')
                or 
               (
                every $v in nameEntry[normalize-space(lower-case(@localType))='denominazionefamiglia']/part/@localType
                satisfies
                (   normalize-space(lower-case($v))='intestazioneprincipalefamiglia'
                 or normalize-space(lower-case($v))='denominazioneprincipalefamiglia'
                )
               )"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0154 0155 0176 0177 0180 &#xa; agente famiglia ammette in identity/nameEntry/@localType i valori&#xa;
DenominazioneFamiglia,
AltraDenominazioneFamiglia."
         test="not(entityType/@value='family')
                or 
               (
                every $v in nameEntry/@localType
                satisfies
                (   normalize-space(lower-case($v))='denominazionefamiglia'
                 or normalize-space(lower-case($v))='altradenominazionefamiglia'
                )
               )"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0176 0177 0180 &#xa; agente famiglia ammette in identity/nameEntry[@localType='AltraDenominazioneFamiglia']/part/@localType i valori&#xa;
Intestazione,
Denominazione,
Qualifica."
         test="not(entityType/@value='family')
                or 
               (
                every $v in nameEntry[normalize-space(lower-case(@localType))='altradenominazionefamiglia']/part/@localType
                satisfies
                (   normalize-space(lower-case($v))='intestazione'
                 or normalize-space(lower-case($v))='denominazione'
                 or normalize-space(lower-case($v))='qualifica'
                )
               )"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0265 0266 0267 &#xa; agente persona ammette in identity/nameEntry[@localType='DenominazionePersona']/part/@localType i valori&#xa;
IntestazionePersona,
NomePersona,
CognomePersona,
Patronimico,
Pseudonimo,
SoprannomePersona,
Origine-provenienzaPersona."
         test="not(entityType/@value='person')
                or 
               (
                every $v in nameEntry[normalize-space(lower-case(@localType))='denominazionepersona']/part/@localType
                satisfies
                (   normalize-space(lower-case($v))='intestazionepersona'
                 or normalize-space(lower-case($v))='nomepersona'
                 or normalize-space(lower-case($v))='cognomepersona'
                 or normalize-space(lower-case($v))='patronimico'
                 or normalize-space(lower-case($v))='pseudonimo'
                 or normalize-space(lower-case($v))='soprannomepersona'
                 or normalize-space(lower-case($v))='origine-provenienzapersona'
                )
               )"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0265 0266 0267 0288 0289 0290 0312 0316 0318 &#xa; agente persona ammette in identity/nameEntry/@localType i valori&#xa;
DenominazionePersona,
AltraDenominazionePersona."
         test="not(entityType/@value='person')
                or 
               (
                every $v in nameEntry/@localType
                satisfies
                (   normalize-space(lower-case($v))='denominazionepersona'
                 or normalize-space(lower-case($v))='altradenominazionepersona'
                )
               )"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0288 0289 0290 0312 0316 0318 &#xa; agente persona ammette in identity/nameEntry[@localType='AltraDenominazionePersona']/part/@localType i valori&#xa;
IntestazionePersona,
NomePersona,
CognomePersona
Qualifica."
         test="not(entityType/@value='person')
                or 
               (
                every $v in nameEntry[normalize-space(lower-case(@localType))='AltraDenominazionepersona']/part/@localType
                satisfies
                (   normalize-space(lower-case($v))='intestazionepersona'
                 or normalize-space(lower-case($v))='nomepersona'
                 or normalize-space(lower-case($v))='cognomepersona'
                 or normalize-space(lower-case($v))='qualifica'
                )
               )"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0734 &#xa; contesto storico istituzionale ammette in identity/nameEntry/@localType il valore&#xa;
DenominazioneCSI."
         test="not(normalize-space(lower-case(@localType))='contestostoricoistituzionale')
                or 
               (
                every $v in nameEntry/@localType
                satisfies
                (
                 normalize-space(lower-case($v))='denominazionecsi'
                )
               )"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0734 &#xa; contesto storico istituzionale ammette in identity/nameEntry[@localType='DenominazioneCSI']/part/@localType il valore&#xa;
IntestazioneCSI."
         test="not(normalize-space(lower-case(@localType))='contestostoricoistituzionale')
                or 
               (
                every $v in nameEntry[normalize-space(lower-case(@localType))='denominazionecsi']/part/@localType
                satisfies
                (
                 normalize-space(lower-case($v))='intestazionecsi'
                )
               )"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0884 0885 &#xa; profilo istituzionale ammette in identity/nameEntry/@localType il valore&#xa;
DenominazioneProfilo."
         test="not(normalize-space(lower-case(@localType))='profiloistituzionale')
                or 
               (
                every $v in nameEntry/@localType
                satisfies
                (
                 normalize-space(lower-case($v))='denominazioneprofilo'
                )
               )"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0734 &#xa; profilo istituzionale ammette in identity/nameEntry[@localType='DenominazioneProfilo']/part/@localType i valori&#xa;
IntestazioneProfilo,
AcronimoProfilo."
         test="not(normalize-space(lower-case(@localType))='profiloistituzionale')
                or 
               (
                every $v in nameEntry[normalize-space(lower-case(@localType))='denominazioneprofilo']/part/@localType
                satisfies
                (
                    normalize-space(lower-case($v))='intestazioneprofilo'
                 or normalize-space(lower-case($v))='acronimoprofilo'
                )
               )"/>

      <!-- 0598 qualifica conservatore (quando il conservatore è una famiglia o una persona non va compilato?) -->
      <!--
            not(identity[@localType[normalize-space(lower-case(.))='soggettoconservatore']])
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0598&#xa; identity/otherEntityTypes/otherEntityType[@localType='Qualifica']/term/&#xa; 'CONSERVATORE Qualifica' lista chiusa con valori&#xa;
Archivio,
Sezione,
Altra sede."
         test="not(relations/relation[targetRole[normalize-space(lower-case(.))='complesso archivistico']][relationType[normalize-space(lower-case(.))='soggetto conservatore']])
                or 
               not(otherEntityTypes/otherEntityType[normalize-space(lower-case(@localType))='qualifica']/term)
                or 
               (count(otherEntityTypes/otherEntityType[normalize-space(lower-case(@localType))='qualifica']/term)=1
                and 
                otherEntityTypes/otherEntityType[normalize-space(lower-case(@localType))='qualifica']/term
                [   .='Archivio'
                 or .='Sezione'
                 or .='Altra sede'
                ]
               )"/>

      <!-- 0022 solo per tipologia ENTE - per esprimere la specifica tipologia dell'ente bisogna prima inserire come sottoelemento di <identity>  <entityType> con @value='corporateBody' e poi sempre come sottoelemento di <identity> otherEntityTypes/otherEntityType[@localType="ente"]/term/, dove
                 va inserito il valore del campo controllato ??? -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0022&#xa; identity[entityType/@value='corporateBody']/otherEntityTypes/otherEntityType[@localType='Ente']/term&#xa; 'TIPOLOGIA ENTE' è richiesto con valori:&#xa;
Accademia/ente di cultura,
Archivio di Stato,
Archivio di Stato/Sezione,
Arte/ordine/collegio/associazione di categoria,
Associazione civile e di movimento,
Associazione combattentistica e d'arma,
Banca/istituto di credito/ente assicurativo/ente previdenziale,
Comitato di liberazione nazionale/corpo militare della Resistenza,
Comune/città metropolitana/unione di comuni,
Corporazione religiosa soppressa,
Ente conservatore,
Ente di gestione di acque, ambiente, energia, territorio, trasporti,
Ente economico e di promozione economica/impresa/studio professionale,
Ente di culto acattolico/associazione acattolica,
Ente di culto cattolico/associazione cattolica,
Ente/istituzione fascista,
Ente ricreativo/sportivo/turistico,
Ente territoriale minore,
Notaio,
Opera pia/istituzione ed ente di assistenza e beneficenza/ospedale,
Ordine cavalleresco,
Organizzazione internazionale,
Organo di informazione e stampa,
Feudo,
Ente sanitario/ente di servizi alla persona,
Partito e movimento politico/associazione politica,
Provincia/provincia autonoma (organo e ufficio),
Rappresentanza diplomatica/ufficio di paesi stranieri con sede in Italia,
Regione/regione a statuto speciale (organo e ufficio),
Scuola/ente di istruzione,
Sindacato/organizzazione sindacale,
Università/ente di ricerca,
Organo o ufficio statale del periodo preunitario,
Organo centrale di stato di Antico regime,
Organo periferico o locale di stato di Antico regime,
Organo o ufficio di stato di Antico regime,
Organo centrale di stato del periodo napoleonico,
Organo periferico di stato del periodo napoleonico,
Organo centrale di stato della Restaurazione,
Organo periferico di stato della Restaurazione,
Organo e ufficio statale centrale di periodo postunitario,
Organo e ufficio statale periferico del periodo postunitario,
Organo o ufficio statale del periodo postunitario."
         test="
          not (
           entityType/@value='corporateBody'
            and
           not(@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
            and
           not(entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
          )
           or
          (
           string-length(normalize-space(otherEntityTypes/otherEntityType[normalize-space(lower-case(@localType))='ente']/term))&gt;0
           and
           (
            every $v in otherEntityTypes/otherEntityType[normalize-space(lower-case(@localType))='ente']/term
            satisfies
            (
                $v='Accademia/ente di cultura'
             or $v='Archivio di Stato'
             or $v='Archivio di Stato/Sezione'
             or $v='Arte/ordine/collegio/associazione di categoria'
             or $v='Associazione civile e di movimento'
             or $v='Associazione combattentistica e d''arma'
             or $v='Banca/istituto di credito/ente assicurativo/ente previdenziale'
             or $v='Comitato di liberazione nazionale/corpo militare della Resistenza'
             or $v='Comune/città metropolitana/unione di comuni'
             or $v='Corporazione religiosa soppressa'
             or $v='Ente conservatore'
             or $v='Ente di gestione di acque, ambiente, energia, territorio, trasporti'
             or $v='Ente economico e di promozione economica/impresa/studio professionale'
             or $v='Ente di culto acattolico/associazione acattolica'
             or $v='Ente di culto cattolico/associazione cattolica'
             or $v='Ente/istituzione fascista'
             or $v='Ente ricreativo/sportivo/turistico'
             or $v='Ente territoriale minore'
             or $v='Notaio'
             or $v='Opera pia/istituzione ed ente di assistenza e beneficenza/ospedale'
             or $v='Ordine cavalleresco'
             or $v='Organizzazione internazionale'
             or $v='Organo di informazione e stampa'
             or $v='Feudo'
             or $v='Ente sanitario/ente di servizi alla persona'
             or $v='Partito e movimento politico/associazione politica'
             or $v='Provincia/provincia autonoma (organo e ufficio)'
             or $v='Rappresentanza diplomatica/ufficio di paesi stranieri con sede in Italia'
             or $v='Regione/regione a statuto speciale (organo e ufficio)'
             or $v='Scuola/ente di istruzione'
             or $v='Sindacato/organizzazione sindacale'
             or $v='Università/ente di ricerca'
             or $v='Organo o ufficio statale del periodo preunitario'
             or $v='Organo centrale di stato di Antico regime'
             or $v='Organo periferico o locale di stato di Antico regime'
             or $v='Organo o ufficio di stato di Antico regime'
             or $v='Organo centrale di stato del periodo napoleonico'
             or $v='Organo periferico di stato del periodo napoleonico'
             or $v='Organo centrale di stato della Restaurazione'
             or $v='Organo periferico di stato della Restaurazione'
             or $v='Organo e ufficio statale centrale di periodo postunitario'
             or $v='Organo e ufficio statale periferico del periodo postunitario'
             or $v='Organo o ufficio statale del periodo postunitario'
            )
           )
          )
         "/>

      <!-- eac 0062 ENTE eac/cpfDescription/identity/entityType[@value='corporateBody']
           cpfDescription/identity/nameEntry/part[@localType='IntestazionePrincipaleEnte']/ è richiesto
           eac 0063 ENTE eac/cpfDescription/identity/entityType[@value='corporateBody']
           cpfDescription/identity/nameEntry/part[@localType='DenominazionePrincipaleEnte']/ è richiesto -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0062 0063 &#xa; nameEntry[@localType='DenominazioneEnte']/part[@localType='IntestazionePrincipaleEnte'], nameEntry[@localType='DenominazioneEnte']/part[@localType='DenominazionePrincipaleEnte']&#xa; 'Denominazione principale' e 'Intestazione principale' sono richiesti e univoci"
         test="
          not (
           entityType/@value='corporateBody'
            and
           not(@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
            and
           not(entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
          )
          or
          (
           count(nameEntry[normalize-space(lower-case(@localType))='denominazioneente']/part[normalize-space(lower-case(@localType))='intestazioneprincipaleente'][string-length(normalize-space(.))>0]) = 1
           and
           count(nameEntry[normalize-space(lower-case(@localType))='denominazioneente']/part[normalize-space(lower-case(@localType))='denominazioneprincipaleente'][string-length(normalize-space(.))>0]) = 1
          )
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac cpfDescription/identity/nameEntry[@localType='AltraDenominazioneEnte] richiede [@status='alternative']"
         test="
          not (
           entityType/@value='corporateBody'
            and
           not(@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
            and
           not(entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
          )
           or
          (
           every $v in nameEntry[normalize-space(lower-case(@localType))='altradenominazioneente']
           satisfies ($v[@status = 'alternative'])
          )
         "/>
      
      <!-- eac 0089 cpfDescription/identity/nameEntry[@localType="AltraDenominazioneEnte" @status="alternative"]/part[@localType="qualifica"]
       Altra denominazione, Altro, Denominazione parallela - Intestazione parallela -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0089&#xa; cpfDescription/identity/nameEntry[@localType='AltraDenominazioneEnte][@status='alternative']/part[@localType='Qualifica']&#xa; 'Qualifica dell'altra denominazione e intestazione' lista chiusa con valori:&#xa;
Altra denominazione,
Altro,
Denominazione parallela - Intestazione parallela."
         test="
          not (
           entityType/@value='corporateBody'
            and
           not(@localType[normalize-space(lower-case(.))='profiloistituzionale' or normalize-space(lower-case(.))='contestostoricoistituzionale'])
            and
           not(entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento'])
          )
           or
          (
           every $v in nameEntry[normalize-space(lower-case(@localType))='altradenominazioneente' and normalize-space(lower-case(@status))='alternative']/part[normalize-space(lower-case(@localType))='qualifica']
           satisfies
           (
               $v='Altra denominazione'
            or $v='Altro'
            or $v='Denominazione parallela - Intestazione parallela'
           )
          )
         "/>
         
      <!-- eac 0154 cpfDescription/identity/nameEntry/part[@localType="IntestazionePrincipaleFamiglia"]/ -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0154&#xa; cpfDescription/identity/nameEntry/part[@localType='IntestazionePrincipaleFamiglia']&#xa; 'Intestazione principale' è richiesto e univoco"
         test="
          not(normalize-space(lower-case(entityType/@value))='family')
           or
          count(nameEntry/part[normalize-space(lower-case(@localType))='intestazioneprincipalefamiglia'][string-length(normalize-space(lower-case(.))) &gt; 0]) = 1
         "/>

      <!-- eac 0154 cpfDescription/identity/nameEntry/part[@localType="DenominazionePrincipaleFamiglia"]/ -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0154&#xa; cpfDescription/identity/nameEntry/part[@localType='DenominazionePrincipaleFamiglia']&#xa; 'Denominazione principale' è richiesto e univoco"
         test="
          not(normalize-space(lower-case(entityType/@value))='family')
           or
          count(nameEntry/part[normalize-space(lower-case(@localType))='denominazioneprincipalefamiglia'][string-length(normalize-space(lower-case(.))) &gt; 0]) = 1
         "/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac cpfDescription/identity/nameEntry[@localType='AltraDenominazioneFamiglia] richiede [@status='alternative']"
         test="
          not(normalize-space(lower-case(entityType/@value))='family')
           or
          (
           every $v in nameEntry[normalize-space(lower-case(@localType))='altradenominazionefamiglia']
           satisfies ($v[@status = 'alternative'])
          )
         "/>
         
      <!-- eac 0180 cpfDescription/identity/nameEntry[@localType="AltraDenominazioneFamiglia" @status="alternative"]/part[@localType="qualifica"]
       Altra denominazione, Altro, Denominazione parallela - Intestazione parallela -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0180&#xa; cpfDescription/identity/nameEntry[@localType='AltraDenominazioneFamiglia][@status='alternative']/part[@localType='Qualifica']&#xa; 'Qualifica dell'altra denominazione e intestazione' lista chiusa con valori:&#xa;
Altra denominazione,
Altro,
Denominazione parallela - Intestazione parallela."
         test="
          not(normalize-space(lower-case(entityType/@value))='family')
           or
          (
           every $v in nameEntry[normalize-space(lower-case(@localType))='altradenominazionefamiglia' and normalize-space(lower-case(@status))='alternative']/part[normalize-space(lower-case(@localType))='qualifica']
           satisfies
           (
               $v='Altra denominazione'
            or $v='Altro'
            or $v='Denominazione parallela - Intestazione parallela'
           )
          )
         "/>
         
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac cpfDescription/identity/nameEntry[@localType='AltraDenominazionePersona] richiede [@status='alternative']"
         test="
          not(normalize-space(lower-case(entityType/@value))='person')
           or
          (
           every $v in nameEntry[normalize-space(lower-case(@localType))='altradenominazionepersona']
           satisfies ($v[@status = 'alternative'])
          )
         "/>
         
      <!-- eac 0292 cpfDescription/identity/nameEntry[@localType="AltraDenominazionePersona" @status="alternative"]/part[@localType="qualifica"]
       Altra denominazione, Altro, Denominazione parallela - Intestazione parallela -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0292&#xa; cpfDescription/identity/nameEntry[@localType='AltraDenominazionePersona][@status='alternative']/part[@localType='Qualifica']&#xa; 'Qualifica dell'altra denominazione e intestazione' lista chiusa con valori:&#xa;
Altra denominazione,
Altro,
Denominazione parallela - Intestazione parallela."
         test="
          not(normalize-space(lower-case(entityType/@value))='person')
           or
          (
           every $v in nameEntry[normalize-space(lower-case(@localType))='altradenominazionepersona' and normalize-space(lower-case(@status))='alternative']/part[normalize-space(lower-case(@localType))='qualifica']
           satisfies
           (
               $v='Altra denominazione'
            or $v='Altro'
            or $v='Denominazione parallela - Intestazione parallela'
           )
          )
         "/>
         
      <!-- eac 0262 cpfDescription/identity/otherEntityTypes/otherEntityType/term/ -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0262&#xa; cpfDescription/identity/otherEntityTypes/otherEntityType[@localType='Genere']/term/&#xa; 'Genere' lista chiusa con valori:&#xa;
Femminile,
Maschile."
         test="
            not(normalize-space(lower-case(entityType/@value))='person')
            or 
            (
             every $v in otherEntityTypes/otherEntityType[normalize-space(lower-case(@localType))='genere']/term
             satisfies
             (
                 $v='Femminile'
              or $v='Maschile'
             )
            )
         "/>
         
      <!-- eac 0267 cpfDescription/identity/nameEntry/part[@localType='CognomePersona'] -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0267 &#xa;cpfDescription/identity/nameEntry/part[@localType='CognomePersona']&#xa; 'Cognome' è richiesto e univoco"
         test="
            not(normalize-space(lower-case(entityType/@value))='person')
            or 
            (
             count(nameEntry[normalize-space(lower-case(@localType))='denominazionepersona']/part[normalize-space(lower-case(@localType))='cognomepersona'][string-length(normalize-space(.)) &gt; 0]) = 1
            )
         "/>

      <!-- eac 0265 cpfDescription/identity/nameEntry/part[@localType='IntestazionePersona'] -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0265&#xa; cpfDescription/identity/nameEntry/part[@localType='IntestazionePersona']&#xa; 'Intestazione principale' è richiesto e univoco"
         test="
            not(normalize-space(lower-case(entityType/@value))='person')
            or 
            (
             count(nameEntry[normalize-space(lower-case(@localType))='denominazionepersona']/part[normalize-space(lower-case(@localType))='intestazionepersona'][string-length(normalize-space(.)) &gt; 0]) = 1
            )
         "/>

      <!-- eac 0721 cpfDescription/identity[@localType="ContestoStoricoIstituzionale"][entityType[@value="corporateBody"]]/identityId/ -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0721&#xa; cpfDescription/identity[@localType='ContestoStoricoIstituzionale'][entityType[@value='corporateBody']]identityId&#xa; 'Identificativo per il Contesto' è richiesto"
         test="
            not(.[normalize-space(lower-case(@localType))='contestostoricoistituzionale'][entityType[@value='corporateBody']])
            or 
            (
             count(.[normalize-space(lower-case(@localType))='contestostoricoistituzionale'][entityType[@value='corporateBody']]/identityId[string-length(normalize-space(.)) &gt; 0]) = 1
            )
         "/>

      <!-- eac 0737 cpfDescription/identity//nameEntry[@localType="DenominazioneCSI"]/part[@localType="IntestazioneCSI"]/ -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0734&#xa; cpfDescription/identity/(.|nameEntrySet)/nameEntry[@localType='DenominazioneCSI']/part[@localType='IntestazioneCSI']/&#xa; 'Intestazione' è richiesto"
         test="
            not(.[normalize-space(lower-case(@localType))='contestostoricoistituzionale'])
            or
            (
             count(
                   .[normalize-space(lower-case(@localType))='contestostoricoistituzionale']/
                   (.|nameEntrySet)/nameEntry[normalize-space(lower-case(@localType))='denominazionecsi']/part[normalize-space(lower-case(@localType))='intestazionecsi'][string-length(normalize-space(.)) &gt; 0]
                  ) = 1
            )
         "/>

      <!-- eac 0871 cpfDescription/identity[@localType="ProfiloIstituzionale"][entityType[@value="corporateBody"]]/identityId/ -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0871&#xa; cpfDescription/identity[@localType='ProfiloIstituzionale'][entityType[@value='corporateBody']]identityId&#xa; 'Identificativo per il Profilo' è richiesto"
         test="
            not(.[normalize-space(lower-case(@localType))='profiloistituzionale'][entityType[@value='corporateBody']])
            or 
            (
             count(.[normalize-space(lower-case(@localType))='profiloistituzionale'][entityType[@value='corporateBody']]/identityId[string-length(normalize-space(.)) &gt; 0]) = 1
            )
         "/>

      <!-- eac 0884 cpfDescription/identity//nameEntry[@localType="DenominazioneProfilo"]/part[@localType="Intestazione"]/ -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0884&#xa; cpfDescription/identity/(.|nameEntrySet)/nameEntry[@localType='DenominazioneProfilo']/part[@localType='IntestazioneProfilo']/&#xa; 'Intestazione' è richiesto"
         test="
            not(.[normalize-space(lower-case(@localType))='profiloistituzionale'])
            or
            (
             count(
                   .[normalize-space(lower-case(@localType))='profiloistituzionale']/
                   (.|nameEntrySet)/nameEntry[normalize-space(lower-case(@localType))='denominazioneprofilo']/part[normalize-space(lower-case(@localType))='intestazioneprofilo'][string-length(normalize-space(.)) &gt; 0]
                  ) = 1
            )
         "/>
         
      <!-- eac 1019 eac/cpfDescription/identity/entityType[@value="corporateBody"][@eac-sia:tipoLocale="Evento"]/identityId/  -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 1019&#xa; cpfDescription/identity[@localType='Evento']/entityType[@value='corporateBody']/identityId&#xa; 'Identificativo per l'evento' è richiesto"
         test="
            not(.[normalize-space(lower-case(@localType))='evento'][entityType[@value='corporateBody']])
            or
            (
             count(.[normalize-space(lower-case(@localType))='evento'][entityType[@value='corporateBody']]/identityId[string-length(normalize-space(.)) &gt; 0]) = 1
            )
         "/>

      <!-- eac 1027 eac/cpfDescription/identity/otherEntityTypes/otherEntityType[@localType="TipoEvento"]/term/ -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 1027&#xa; cpfDescription/identity/otherEntityTypes/otherEntityType[@localType='TipoEvento']/term&#xa; 'Tipologia evento' è richiesto con valori:&#xa;
Evento terroristico,
Evento storico,
Evento politico,
Evento bellico,
Ricorrenza,
Celebrazione,
Ricorrenza annuale,
Ricorrenza mensile,
Ricorrenza biennale."
         test="
            not (
             normalize-space(lower-case(@localType))='evento'
              or 
             entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento']
            )
            or
            (
             count(otherEntityTypes/otherEntityType[normalize-space(lower-case(@localType))='tipoevento']/term[string-length(normalize-space(.)) &gt; 0]) = 1
             and
             (
              every $v in otherEntityTypes/otherEntityType[normalize-space(lower-case(@localType))='tipoevento']/term satisfies
              (
                  $v='Evento terroristico'
               or $v='Evento storico'
               or $v='Evento politico'
               or $v='Evento bellico'
               or $v='Ricorrenza'
               or $v='Celebrazione'
               or $v='Ricorrenza annuale'
               or $v='Ricorrenza mensile'
               or $v='Ricorrenza biennale'
              )
             )
            )
         "/>

      <!-- eac 1030 cpfDescription/identity/nameEntry[@localType="DenominazioneEvento"]/part/ -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 1030&#xa; cpfDescription/identity/nameEntry[@localType='DenominazioneEvento']/part&#xa; 'Denominazione' è richiesto"
         test="
            not (
             normalize-space(lower-case(@localType))='evento'
              or 
             entityType[normalize-space(lower-case(@eac-sia:tipoLocale))='evento']
            )
            or
            (
             count(nameEntry[normalize-space(lower-case(@localType))='denominazioneevento']/part[string-length(normalize-space(.)) &gt; 0]) &gt; 0
            )
         "/>

   </xs:complexType>
   <xs:complexType name="description">
      <xs:sequence>
         <xs:element type="eac:demographicDescriptions"
                     name="demographicDescriptions"
                     minOccurs="0"/>
         <xs:element type="eac:functions" name="functions" minOccurs="0"/>
         <xs:element type="eac:languagesUsed" name="languagesUsed" minOccurs="0"/>
         <xs:element type="eac:legalStatuses" name="legalStatuses" minOccurs="0"/>
         <xs:element type="eac:localDescriptions" name="localDescriptions" minOccurs="0"/>
         <xs:element type="eac:mandates" name="mandates" minOccurs="0"/>
         <xs:element type="eac:occupations" name="occupations" minOccurs="0"/>
         <xs:element type="eac:places" name="places" minOccurs="0"/>
         <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element type="eac:biogHist" name="biogHist"/>
            <xs:element type="eac:existDates" name="existDates"/>
            <xs:element type="eac:generalContext" name="generalContext"/>
            <xs:element type="eac:structureOrGenealogy" name="structureOrGenealogy"/>
         </xs:choice>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="base" type="xs:anyURI"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="relations">
      <xs:sequence>
         <xs:element type="eac:relation" name="relation" maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="base" type="xs:anyURI"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="alternativeSet">
      <xs:sequence>
         <xs:element type="eac:setComponent" name="setComponent" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="base" type="xs:anyURI"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="agencyCode" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="status">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="authorized"/>
               <xs:enumeration value="alternative"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="agencyName" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="otherAgencyCode" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="status">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="authorized"/>
               <xs:enumeration value="alternative"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="descriptiveNote">
      <xs:sequence>
         <xs:element type="eac:p" name="p" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="maintenanceEvent">
      <xs:sequence>
         <xs:element type="eac:agent" name="agent"/>
         <xs:element type="eac:eventDateTime" name="eventDateTime"/>
         <xs:element type="eac:eventDescription"
                     name="eventDescription"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventType" use="required">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="cancelled"/>
               <xs:enumeration value="created"/>
               <xs:enumeration value="deleted"/>
               <xs:enumeration value="derived"/>
               <xs:enumeration value="revised"/>
               <xs:enumeration value="unknown"/>
               <xs:enumeration value="updated"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
<!-- Campo eliminato da SIA
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0705 0855 1003 1079&#xa; control/maintenanceHistory/maintenanceEvent/agent/@eac-sia:tipologiaAgente&#xa; 'Tipologia compilatore' lista chiusa con valori:&#xa;
Persona,
Organizzazione,
Software."
      test="every $v in (agent/@eac-sia:tipologiaAgente)
            satisfies 
            (
                normalize-space(lower-case($v))='persona'
             or normalize-space(lower-case($v))='organizzazione'
             or normalize-space(lower-case($v))='software'
            )
           "/>
-->
   </xs:complexType>
   <xs:complexType name="source">
      <xs:sequence>
         <xs:element type="eac:reference" name="reference" maxOccurs="unbounded"/>
         <xs:element type="eac:citedRange"
                     name="citedRange"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
         <xs:element type="eac:objectXMLWrap" name="objectXMLWrap" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="href" type="xs:anyURI"/>
      <xs:attribute name="linkRole" type="xs:anyURI"/>
      <xs:attribute name="linkTitle" type="xs:token"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0694 0697 0699 0701 0846 0849 0851 0853 0994 0997 0999 1001 &#xa; control/sources/source/reference/@linkRole&#xa; ammette i valori:&#xa;
FonteArchivistica,
FonteNormativa,
RiferimentoBibliografico,
RiferimentoWeb"
         test="not(reference/@linkRole[
                   normalize-space(lower-case(.))!='fontearchivistica'
               and normalize-space(lower-case(.))!='fontenormativa'
               and normalize-space(lower-case(.))!='riferimentobibliografico'
               and normalize-space(lower-case(.))!='riferimentoweb'
              ])"/>
      
   </xs:complexType>
   <xs:complexType name="reference" mixed="true">
      <xs:sequence>
         <xs:element type="eac:span" name="span" minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="href" type="xs:anyURI"/>
      <xs:attribute name="linkRole" type="xs:anyURI"/>
      <xs:attribute name="linkTitle" type="xs:token"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      
   </xs:complexType>
   <xs:complexType name="shortCode" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="term" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:simpleType name="m.data.standardDate"><!-- uniformità con eac-cpf -->
     <xs:union memberTypes="xs:date xs:gYear xs:gYearMonth"/>
   </xs:simpleType>
   
   <xs:complexType name="date" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="calendar" type="xs:NMTOKEN"/>
      <xs:attribute name="certainty" type="xs:NMTOKEN"/>
      <xs:attribute name="era" type="xs:NMTOKEN"/>
      <!--
      <xs:attribute name="notAfter" type="xs:token"/>
      <xs:attribute name="notBefore" type="xs:token"/>
      <xs:attribute name="standardDate" type="xs:token"/>
      -->
      <xs:attribute name="standardDate" type="m.data.standardDate"/>
      <xs:attribute name="notBefore" type="m.data.standardDate"/>
      <xs:attribute name="notAfter" type="m.data.standardDate"/>
      <xs:attribute name="status">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="unknown"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac &#xa; valore non atteso in date/@localType"
         test="
            every $v in @localType
            satisfies (
                normalize-space(lower-case($v))='estremocronologicotestuale'
             or normalize-space(lower-case($v))='periododichiusura'
             or normalize-space(lower-case($v))='notealladatazione'
             or normalize-space(lower-case($v))='secolo'
            )
         "/>
      
      <!-- 
       eac 0030 0036 0050 0056 0073 0079 0097 0103 0115 0121 0136 0142 0164 0170 0188 0194 0206 0212 0227 0233 0247 0253 0276 0282 0300 0306 0326 0332 0348 0354 0368 0374 0388 0394 0408 0414 0437 0443 0460 0466 0483 0489 0515 0521 0542 0548 0562 0568 0581 0587 0653 0659 0675 0681 0744 0750 0768 0774 0789 0795 0811 0817 0833 0839 0894 0900 0918 0924 0940 0946 0961 0967 0981 0987 1039 1046
       date/@certainty 'Validità' Lista chiusa: dataApprossimativa, dataAttribuita, dataIncerta, dataIncertaAttribuita, dataPostQuem.
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0030 0036 0050 0056 0073 0079 0097 0103 0115 0121 0136 0142 0164 0170 0188 0194 0206 0212 0227 0233 0247 0253 0276 0282 0300 0306 0326 0332 0348 0354 0368 0374 0388 0394 0408 0414 0437 0443 0460 0466 0483 0489 0515 0521 0542 0548 0562 0568 0581 0587 0653 0659 0675 0681 0744 0750 0768 0774 0789 0795 0811 0817 0833 0839 0894 0900 0918 0924 0940 0946 0961 0967 0981 0987 1039 1046&#xa;
date/@certainty&#xa; 'Validità' lista chiusa con valori:&#xa;
DataApprossimativa,
DataAttribuita,
DataIncerta,
DataIncertaAttribuita,
DataPostQuem,
DataAnteQuem."
         test="
            every $v in (@certainty)
            satisfies
            (
                $v='DataApprossimativa'
             or $v='DataAttribuita'
             or $v='DataIncerta'
             or $v='DataIncertaAttribuita'
             or $v='DataPostQuem'
             or $v='DataAnteQuem'
            )
           "/>
      
      <!-- 0026 0046 0069 0093 0111 0132 0160 0184 0202 0223 0243 0272 0296 0322 0344 0364 0384 0404 0433 0456 0479 0511 0538 0558 0577 0649 0671 0740 0764 0785 0807 0829 0890 0914 0936 0957 0977 1034
      date[@eac-sia:tipologiaData] 'Tipologia data' Lista chiusa: Intervallo di date, Data singola, Data aperta, Data non rilevata/non rilevabile.
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0026 0046 0069 0093 0111 0132 0160 0184 0202 0223 0243 0272 0296 0322 0344 0364 0384 0404 0433 0456 0479 0511 0538 0558 0577 0649 0671 0740 0764 0785 0807 0829 0890 0914 0936 0957 0977 1034&#xa; 
date/@eac-sia:tipologiaData&#xa; 'Tipologia data' lista chiusa con valori:&#xa; 
Intervallo di date,
Data singola,
Data aperta (a partire da),
Data aperta (fino a),
Data non rilevabile - non rilevata."
      test="every $v in (@eac-sia:tipologiaData)
            satisfies 
            (
                $v='Intervallo di date'
             or $v='Data singola'
             or $v='Data aperta (a partire da)'
             or $v='Data aperta (fino a)'
             or $v='Data non rilevabile - non rilevata'
            )
           "/>
         
   </xs:complexType>
   <xs:complexType name="dateRange">
      <xs:choice>
         <xs:sequence>
            <xs:element type="eac:fromDate" name="fromDate"/>
            <xs:element type="eac:toDate" name="toDate" minOccurs="0"/>
         </xs:sequence>
         <xs:element type="eac:toDate" name="toDate"/>
      </xs:choice>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>

      <!-- 0030 0050 0073 0097 0115 0136 0164 0188 0206 0227 0247 0276 0300 0326 0348 0368 0388 0408 0437 0460 0483 0515 0542 0562 0581 0653 0675 0744 0768 0789 0811 0833 0894 0918 0940 0961 0981 1039
         Validità fromDate/@certainty Lista chiusa: dataApprossimativa, dataAttribuita, dataIncerta, dataIncertaAttribuita, dataPostQuem.
           0036 0056 0079 0103 0121 0142 0170 0194 0212 0233 0253 0282 0306 0332 0354 0374 0394 0414 0443 0466 0489 0521 0548 0568 0587 0659 0681 0750 0774 0795 0817 0839 0900 0924 0946 0967 0987 1046
         Validità toDate/@certainty Lista chiusa: dataApprossimativa, dataAttribuita, dataIncerta, dataIncertaAttribuita, dataPostQuem.
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0030 0050 0073 0097 0115 0136 0164 0188 0206 0227 0247 0276 0300 0326 0348 0368 0388 0408 0437 0460 0483 0515 0542 0562 0581 0653 0675 0744 0768 0789 0811 0833 0894 0918 0940 0961 0981 1039 0036 0056 0079 0103 0121 0142 0170 0194 0212 0233 0253 0282 0306 0332 0354 0374 0394 0414 0443 0466 0489 0521 0548 0568 0587 0659 0681 0750 0774 0795 0817 0839 0900 0924 0946 0967 0987 1046&#xa;
(fromDate|toDate)/@certainty&#xa; 'Validità' lista chiusa con valori:
DataApprossimativa,
DataAttribuita,
DataIncerta,
DataIncertaAttribuita,
DataPostQuem,
DataAnteQuem."
         test="
            every $v in ((fromDate|toDate)/@certainty)
            satisfies
            (
                $v='DataApprossimativa'
             or $v='DataAttribuita'
             or $v='DataIncerta'
             or $v='DataIncertaAttribuita'
             or $v='DataPostQuem'
             or $v='DataAnteQuem'
            )
           "/>
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0026 0046 0069 0093 0111 0132 0160 0184 0202 0223 0243 0272 0296 0322 0344 0364 0384 0404 0433 0456 0479 0511 0538 0558 0577 0649 0671 0740 0764 0785 0807 0829 0890 0914 0936 0957 0977 1034&#xa; 
dateRange/@eac-sia:tipologiaData&#xa; 'Tipologia data' lista chiusa con valori:&#xa; 
Intervallo di date,
Data singola,
Data aperta (a partire da),
Data aperta (fino a),
Data non rilevabile - non rilevata."
      test="every $v in (@eac-sia:tipologiaData)
            satisfies 
            (
                $v='Intervallo di date'
             or $v='Data singola'
             or $v='Data aperta (a partire da)'
             or $v='Data aperta (fino a)'
             or $v='Data non rilevabile - non rilevata'
            )
           "/>

   </xs:complexType>
   <xs:complexType name="entityType">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="value" use="required">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="corporateBody"/>
               <xs:enumeration value="person"/>
               <xs:enumeration value="family"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="nameEntry">
      <xs:sequence>
         <xs:element type="eac:part" name="part" maxOccurs="unbounded"/>
         <xs:element type="eac:useDates"
                     name="useDates"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="preferredForm" type="xs:boolean"/>
      <xs:attribute name="status">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="authorized"/>
               <xs:enumeration value="alternative"/>
               <!-- 0089 0180 0292 sostituito con alternative (xsd)
               <xs:enumeration value="alternativo"/> -->
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="nameEntrySet">
      <xs:sequence>
         <xs:element type="eac:nameEntry" name="nameEntry"/>
         <xs:element type="eac:nameEntry" name="nameEntry" maxOccurs="unbounded"/>
         <xs:element type="eac:useDates"
                     name="useDates"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="otherEntityTypes">
      <xs:sequence>
         <xs:element type="eac:otherEntityType"
                     name="otherEntityType"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="identityId" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="demographicDescriptions">
      <xs:sequence>
         <xs:element type="eac:demographicDescription"
                     name="demographicDescription"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="functions">
      <xs:sequence>
         <xs:element type="eac:function" name="function" maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="languagesUsed">
      <xs:sequence>
         <xs:element type="eac:languageUsed" name="languageUsed" maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="legalStatuses">
      <xs:sequence>
         <xs:element type="eac:legalStatus" name="legalStatus" maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="localDescriptions">
      <xs:sequence>
         <xs:element type="eac:localDescription"
                     name="localDescription"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="mandates">
      <xs:sequence>
         <xs:element type="eac:mandate" name="mandate" maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="occupations">
      <xs:sequence>
         <xs:element type="eac:occupation" name="occupation" maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="places">
      <xs:sequence>
         <xs:element type="eac:place" name="place" maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="biogHist">
      <xs:sequence>
         <xs:element type="eac:head" name="head" minOccurs="0"/>
         <xs:element type="eac:abstract" name="abstract" minOccurs="0"/>
         <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element type="eac:list" name="list"/>
            <xs:element type="eac:p" name="p"/>
            <xs:element type="eac:chronList" name="chronList"/>
         </xs:choice>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="existDates">
      <xs:sequence>
         <xs:choice>
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0124&#xa; cpfDescription/description/existDates[@localType='DateEsistenzaEnte']/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData&#xa; 'Qualifica della data' è richiesto con valori:&#xa;
Data di istituzione,
Data di cessazione - soppressione,
Date di esistenza."
      test="not(normalize-space(lower-case(@localType))='dateesistenzaente')
            or
            (
             (count((.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData) &gt; 0)
             and
             (
              every $v in ((.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData)
              satisfies 
              (
                  $v='Data di istituzione'
               or $v='Data di cessazione - soppressione'
               or $v='Date di esistenza'
              )
             )
            )
           "/>
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0215&#xa; cpfDescription/description/existDates[@localType='DateEsistenzaFamiglia']/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData&#xa; 'Qualifica della data' è richiesto con valori:&#xa;
Data di esistenza,
Data di estinzione,
Data di origine."
      test="not(normalize-space(lower-case(@localType))='dateesistenzafamiglia')
            or
            (
             (count((.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData) &gt; 0)
             and
             (
              every $v in ((.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData)
              satisfies 
              (
                  $v='Data di esistenza'
               or $v='Data di estinzione'
               or $v='Data di origine'
              )
             )
            )
           "/>
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0335&#xa; cpfDescription/description/existDates[@localType='DateEsistenzaPersona']/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData&#xa; 'Qualifica della data' è richiesto con valori:&#xa;
Data di nascita,
Data di morte,
Date di esistenza."
      test="not(normalize-space(lower-case(@localType))='dateesistenzapersona')
            or
            (
             (count((.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData) &gt; 0)
             and
             (
              every $v in ((.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData)
              satisfies 
              (
                  $v='Data di nascita'
               or $v='Data di morte'
               or $v='Date di esistenza'
              )
             )
            )
           "/>
      
   </xs:complexType>
   <xs:complexType name="generalContext">
      <xs:sequence>
         <xs:element type="eac:head" name="head" minOccurs="0"/>
         <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element type="eac:list" name="list"/>
            <xs:element type="eac:p" name="p"/>
         </xs:choice>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="structureOrGenealogy">
      <xs:sequence>
         <xs:element type="eac:head" name="head" minOccurs="0"/>
         <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element type="eac:list" name="list"/>
            <xs:element type="eac:p" name="p"/>
         </xs:choice>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="relation">
      <xs:sequence>
         <xs:element type="eac:targetEntity" name="targetEntity"/>
         <xs:choice minOccurs="0">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element type="eac:place" name="place"/>
            <xs:element type="eac:relationType" name="relationType"/>
            <xs:element type="eac:targetRole" name="targetRole"/>
         </xs:choice>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
         <xs:element type="eac:objectXMLWrap" name="objectXMLWrap" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      
       <!-- 0426 0427
          eac/cpfDescription/relations/relation[targetRole="complesso archivistico"]/relationType/
             Lista chiusa: Soggetto produttore, Soggetto conservatore, Possessore, Proprietario, Detentore di diritti
             obbligatorio con eac/cpfDescription/relations/relation[targetRole="complesso archivistico"]/targetEntity[@targetType="resource"]/@id --><!--
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0426 0427 cpfDescription/relations/relation[targetRole='complesso archivistico'][targetEntity[@targetType='resource' and @id]]/relationType lista chiusa con valori:
Soggetto produttore,
Soggetto conservatore,
Possessore,
Proprietario,
Detentore di diritti"
          test="not(.[targetRole[normalize-space(lower-case(.))='complesso archivistico']]/targetEntity[@targetType='resource']/@id)
                 or
                not
                (.[targetRole[normalize-space(lower-case(.))='complesso archivistico']][targetEntity[@targetType='resource' and @id]]
                 [not(relationType)
                  or
                  relationType
                  [    normalize-space(lower-case(.))!='soggetto produttore'
                   and normalize-space(lower-case(.))!='soggetto conservatore'
                   and normalize-space(lower-case(.))!='possessore'
                   and normalize-space(lower-case(.))!='proprietario'
                   and normalize-space(lower-case(.))!='detentore di diritti'
                  ]
                 ]
                )
               "/>
       -->

       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac&#xa; cpfDescription/relations/relation[targetRole[.='AgenteCollegato']]/targetEntity/part/@localType ammette valore&#xa;
RuoloAgente"
          test="
           not(targetRole[normalize-space(lower-case(.))='agente collegato'])
            or
           (
            every $v in targetEntity/part/@localType satisfies
            normalize-space(lower-case($v)) = 'ruoloagente'
           )
          "/>

       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac&#xa; valore non atteso in cpfDescription/relations/relation/targetEntity/part/@localType"
          test="
           targetRole[normalize-space(lower-case(.))='agente collegato']
            or
           (
            count(targetEntity/part[@localType]) = 0
           )
          "/>

       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac&#xa; cpfDescription/relations/relation RELAZIONI targetEntity/@targetType e targetRole sono richiesti"
          test="
           relationType[normalize-space(lower-case(.))='sameas']
            or
           (
            targetRole[string-length(normalize-space(.))&gt;0]
             and 
            targetEntity[string-length(normalize-space(@targetType))&gt;0]
           )
          "/>
       <!-- 0427
          eac/cpfDescription/relations/relation[targetRole="Complesso Archivistico"]/relationType/
             Soggetto conservatore, Soggetto vigilante, Soggetto produttore, Possessore, Proprietario, Detentore dei diritti -->
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0427&#xa; cpfDescription/relations/relation[targetRole='Complesso Archivistico']/relationType&#xa; 'Qualifica della relazione' è richiesto con valori:&#xa;
Soggetto conservatore,
Soggetto vigilante,
Soggetto produttore,
Possessore,
Proprietario,
Detentore dei diritti."
          test="not(.[targetRole[normalize-space(lower-case(.))='complesso archivistico']])
                 or
                (
                 (count(relationType) &gt; 0)
                  and
                 ( 
                  every $v in (relationType/text())
                  satisfies 
                  (
                      $v='Soggetto conservatore'
                   or $v='Soggetto vigilante'
                   or $v='Soggetto produttore'
                   or $v='Possessore'
                   or $v='Proprietario'
                   or $v='Detentore dei diritti'
                  )
                 )
                )
               "/>
       <!-- 0446 cpfDescription/relations/relation[targetRole="Complesso Archivistico"][relationType[.='soggetto produttore' or .='soggetto conservatore']]/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData Data inizio produzione, Data fine produzione, Data di ingresso presso il conservatore  -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0446&#xa; cpfDescription/relations/relation[targetRole='Complesso Archivistico'][relationType[.='soggetto produttore' or .='soggetto conservatore']]/(.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData&#xa; 'Qualifica della data' lista chiusa con valori:&#xa;
Data inizio produzione,
Data fine produzione,
Data di ingresso presso il conservatore."
         test="
            not(.[targetRole[normalize-space(lower-case(.))='complesso archivistico']])
            or
            not(.[relationType[normalize-space(lower-case(.))='soggetto produttore' or normalize-space(lower-case(.))='soggetto conservatore']])
            or 
            (
             every $v in ((.|dateSet)/(date|(dateRange/(fromDate|toDate)))/@eac-sia:qualificaData)
             satisfies 
             (
                 $v='Data inizio produzione'
              or $v='Data fine produzione'
              or $v='Data di ingresso presso il conservatore'
             )
            )
         "/>

       <!-- 0451 eac/cpfDescription/relations/relation[targetRole="unita archivistica"]/targetRole/@localType
            0474 eac/cpfDescription/relations/relation[targetRole="unita documentaria"]/targetRole/@localType
               Agrimensore, Autore, Committente, Copista, Corrispondente, Curatore, Destinatario, Detentore dei diritti, Disegnatore, Editore, Esecutore, Finanziatore, Fotografo inventore, Fotografo principale, Giudice, Ideatore, Incisore, Litografo, Miniaturista, Mittente, Notaio, Partecipante, Possessore, Progettista, Proprietario, Regista, Responsabile, Rilevatore, Supervisore, Testimone
       -->
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0451 0474&#xa; cpfDescription/relations/relation/targetRole[.='Unita Archivistica' or .='Unita Documentaria']/@localType&#xa; 'Ruolo/qualifica' lista chiusa con valori:&#xa;
Agrimensore,
Autore,
Committente,
Copista,
Corrispondente,
Curatore,
Destinatario,
Detentore dei diritti,
Disegnatore,
Editore,
Esecutore,
Finanziatore,
Fotografo inventore,
Fotografo principale,
Giudice,
Ideatore,
Incisore,
Litografo,
Miniaturista,
Mittente,
Notaio,
Partecipante,
Possessore,
Progettista,
Proprietario,
Regista,
Responsabile,
Rilevatore,
Supervisore,
Testimone."
           test="not(./targetRole[normalize-space(lower-case(.))='unita archivistica' or normalize-space(lower-case(.))='unita documentaria']/@localType[
                     .!='Agrimensore'
                 and .!='Autore'
                 and .!='Committente'
                 and .!='Copista'
                 and .!='Corrispondente'
                 and .!='Curatore'
                 and .!='Destinatario'
                 and .!='Detentore dei diritti'
                 and .!='Disegnatore'
                 and .!='Editore'
                 and .!='Esecutore'
                 and .!='Finanziatore'
                 and .!='Fotografo inventore'
                 and .!='Fotografo principale'
                 and .!='Giudice'
                 and .!='Ideatore'
                 and .!='Incisore'
                 and .!='Litografo'
                 and .!='Miniaturista'
                 and .!='Mittente'
                 and .!='Notaio'
                 and .!='Partecipante'
                 and .!='Possessore'
                 and .!='Progettista'
                 and .!='Proprietario'
                 and .!='Regista'
                 and .!='Responsabile'
                 and .!='Rilevatore'
                 and .!='Supervisore'
                 and .!='Testimone'
                ])"/>
       <!-- 0452 eac/cpfDescription/relations/relation[targetRole="unita archivistica"]/descriptiveNote/p/
            0475 eac/cpfDescription/relations/relation[targetRole="unita documentaria"]/descriptiveNote/p/
               Lista chiusa: Analisi diagnostiche, Analisi iconografica, Analisi stilistica, Attributo figurato, Bibliografia, Bollo, Cartiglio, Contesto, Documentazione, Firma, Fonte archivistica, Inventario museale, Iscrizione, Marchio, Monogramma, Nota manoscritta, Pubblicazione, Punzone, Sigla, Simbolo, Timbro, Tradizione orale
       -->
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0452 0475&#xa; cpfDescription/relations/relation[targetRole[.='Unita Archivistica' or .='Unita Documentaria']]/descriptiveNote/p&#xa; 'Motivo dell'attribuzione' lista chiusa con valori:&#xa;
Analisi diagnostiche,
Analisi iconografica,
Analisi stilistica,
Attributo figurato,
Bibliografia,
Bollo,
Cartiglio,
Contesto,
Documentazione,
Firma,
Fonte archivistica,
Inventario museale,
Iscrizione,
Marchio,
Monogramma,
Nota manoscritta,
Pubblicazione,
Punzone,
Sigla,
Simbolo,
Timbro,
Tradizione orale."
          test="not(.[targetRole[normalize-space(lower-case(.))='unita archivistica' or normalize-space(lower-case(.))='unita documentaria']]/descriptiveNote/p[
                     .!='Analisi diagnostiche'
                 and .!='Analisi iconografica'
                 and .!='Analisi stilistica'
                 and .!='Attributo figurato'
                 and .!='Bibliografia'
                 and .!='Bollo'
                 and .!='Cartiglio'
                 and .!='Contesto'
                 and .!='Documentazione'
                 and .!='Firma'
                 and .!='Fonte archivistica'
                 and .!='Inventario museale'
                 and .!='Iscrizione'
                 and .!='Marchio'
                 and .!='Monogramma'
                 and .!='Nota manoscritta'
                 and .!='Pubblicazione'
                 and .!='Punzone'
                 and .!='Sigla'
                 and .!='Simbolo'
                 and .!='Timbro'
                 and .!='Tradizione orale'
                ])"/>

       <!-- eac 0497 cpfDescription/relations/relation[targetRole="Strumento di ricerca"]/relationType
               Lista chiusa: Autore, Curatore, Supervisore. -->
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0497&#xa; cpfDescription/relations/relation[targetRole[.='Strumento di ricerca']]/relationType&#xa; 'Ruolo' lista chiusa con valori:&#xa;
Autore,
Curatore,
Supervisore."
           test="not(.[targetRole[normalize-space(lower-case(.))='strumento di ricerca']]/relationType[
                     .!='Autore'
                 and .!='Curatore'
                 and .!='Supervisore'
                ])"/>

       <!-- eac 0501 cpfDescription/relations/relation[targetRole="Progetto"]/relationType
               Responsabile, Finanziatore, Responsabile scientifico, Responsabile operativo, Coordinatore, Promotore, Realizzatore, Partecipante, Supporto, Operatore
               NB: gli ultimi tre ruoli si aggiungono alla lista in caso di Agente coinvolto (diverso da Agente principale, per cui valgono solo i primi sette valori) -->
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0501&#xa; cpfDescription/relations/relation[targetRole[.='Progetto']]/relationType&#xa; 'Qualificazione della partecipazione al progetto' lista chiusa con valori:&#xa;
Responsabile,
Finanziatore,
Responsabile scientifico,
Responsabile operativo,
Coordinatore,
Promotore,
Realizzatore,
Partecipante,
Supporto,
Operatore."
           test="not(.[targetRole[normalize-space(lower-case(.))='progetto']]/relationType[
                     .!='Responsabile'
                 and .!='Finanziatore'
                 and .!='Responsabile scientifico'
                 and .!='Responsabile operativo'
                 and .!='Coordinatore'
                 and .!='Promotore'
                 and .!='Realizzatore'
                 and .!='Partecipante'
                 and .!='Supporto'
                 and .!='Operatore'
                ])"/>
                
       <!-- eac 0534 0554 0645 0667 cpfDescription/relations/relation[
       targetRole="Soggetto produttore collegato" or
       targetRole="Soggetto conservatore collegato"
       ]/relationType
               Lista chiusa: Identità, Gerarchica, GerarchicaPadre, GerarchicaFiglio, Temporale, TemporalePrecedente, TemporaleSuccessiva, Associativa. -->
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0534 0554 0645 0667&#xa; cpfDescription/relations/relation[targetRole[

.='Soggetto produttore collegato' or
.='Soggetto conservatore collegato'

]]/relationType&#xa; 'Qualifica della relazione' lista chiusa con valori:&#xa;

Identità,
Gerarchica,
GerarchicaPadre,
GerarchicaFiglio,
Temporale,
TemporalePrecedente,
TemporaleSuccessiva,
Associativa."
           test="not(.
                     [
                      targetRole
                      [
                          normalize-space(lower-case(.))='soggetto produttore collegato'
                       or normalize-space(lower-case(.))='soggetto conservatore collegato'
                      ]
                     ]/
                     relationType
                     [
                          .!='Identità'
                      and .!='Gerarchica'
                      and .!='GerarchicaPadre'
                      and .!='GerarchicaFiglio'
                      and .!='Temporale'
                      and .!='TemporalePrecedente'
                      and .!='TemporaleSuccessiva'
                      and .!='Associativa'
                     ]
                    )"/>

       <!-- eac 0573 cpfDescription/relations/relation[targetRole="Profilo istituzionale collegato"]/targetEntity/@targetType
               Lista chiusa: corporateBody. -->
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0573&#xa; cpfDescription/relations/relation[targetRole[.='Profilo istituzionbale collegato']]&#xa; ammette in targetEntity/@targetType 'corporateBody'"
           test="not(.[targetRole[normalize-space(lower-case(.))='profilo istituzionale collegato']]/targetEntity[@targetType!='corporateBody'])"/>

       <!-- eac 0690 cpfDescription/relations/relation[targetRole="Risorsa digitale collegata"]/relationType
               Lista chiusa: Nativo Digitale, È documentazione, È rappresentazione di. -->
       <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
          xao:message="=&gt;&#xa;eac 0690&#xa; cpfDescription/relations/relation[targetRole[.='Risorsa digitale collegata']]/relationType&#xa; 'Tipologia relazione' lista chiusa con valori:&#xa;
Nativo Digitale,
È documentazione,
È rappresentazione di."
           test="not(.[targetRole[normalize-space(lower-case(.))='risorsa digitale collegata']]/relationType[
                     .!='Nativo digitale'
                 and .!='È documentazione'
                 and .!='È rappresentazione di'
                ])"/>

   </xs:complexType>
   <xs:complexType name="setComponent">
      <xs:sequence>
         <xs:element type="eac:componentEntry"
                     name="componentEntry"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
         <xs:element type="eac:objectXMLWrap" name="objectXMLWrap" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="href" type="xs:anyURI"/>
      <xs:attribute name="linkRole" type="xs:anyURI"/>
      <xs:attribute name="linkTitle" type="xs:token"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="p" mixed="true">
      <xs:choice minOccurs="0" maxOccurs="unbounded">
         <xs:element type="eac:reference" name="reference"/>
         <xs:element type="eac:span" name="span"/>
      </xs:choice>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="agent" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="agentType" use="required">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="human"/>
               <xs:enumeration value="machine"/>
               <xs:enumeration value="unknown"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="eventDateTime" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="standardDateTime">
         <xs:simpleType>
            <xs:union memberTypes="xs:gYear xs:gYearMonth xs:date xs:dateTime"/>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="eventDescription" mixed="true">
      <xs:choice minOccurs="0" maxOccurs="unbounded">
         <xs:element type="eac:reference" name="reference"/>
         <xs:element type="eac:span" name="span"/>
      </xs:choice>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>

      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac &#xa; valore non atteso in control/maintenanceHistory/maintenanceEvent/eventDescription/span/@localType"
         test="
            every $v in (span/@localType)
            satisfies 
            (
                normalize-space(lower-case($v))='azione'
             or normalize-space(lower-case($v))='noteredazionali'
            )
           "/>
      
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0707 0857 1005 1081&#xa; control/maintenanceHistory/maintenanceEvent/eventDescription/span[@localType='Azione']&#xa; 'Azione' lista chiusa con valori:&#xa;
Importazione,
Integrazione successiva,
Prima redazione,
Raccolta delle informazioni,
Revisione,
Rielaborazione,
Supervisione."
         test="every $v in (span[normalize-space(lower-case(@localType))='azione'])
            satisfies 
            (
                $v='Importazione'
             or $v='Integrazione successiva'
             or $v='Prima redazione'
             or $v='Raccolta delle informazioni'
             or $v='Revisione'
             or $v='Rielaborazione'
             or $v='Supervisione'
            )
           "/>

   </xs:complexType>
   <xs:complexType name="citedRange" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="unit" type="xs:token"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="objectXMLWrap">
      <xs:complexContent>
         <xs:extension base="eac:_1">
            <xs:attribute name="audience">
               <xs:simpleType>
                  <xs:restriction base="xs:token">
                     <xs:enumeration value="external"/>
                     <xs:enumeration value="internal"/>
                  </xs:restriction>
               </xs:simpleType>
            </xs:attribute>
            <xs:attribute name="id" type="xs:ID"/>
            <xs:attribute name="target" type="xs:IDREFS"/>
            <xs:anyAttribute namespace="##other" processContents="lax"/>
         </xs:extension>
      </xs:complexContent>
   </xs:complexType>
   <xs:complexType name="span" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="style" type="xs:normalizedString"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="fromDate" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="calendar" type="xs:NMTOKEN"/>
      <xs:attribute name="certainty" type="xs:NMTOKEN"/>
      <!-- 0030 0050 ... (xsd) modificata lista con NMTOKEN
      <xs:attribute name="certainty" type="xs:token"/> -->
      <xs:attribute name="era" type="xs:NMTOKEN"/><!--
      <xs:attribute name="notAfter" type="xs:token"/>
      <xs:attribute name="notBefore" type="xs:token"/>
      <xs:attribute name="standardDate" type="xs:token"/>
      -->
      <xs:attribute name="standardDate" type="m.data.standardDate"/>
      <xs:attribute name="notBefore" type="m.data.standardDate"/>
      <xs:attribute name="notAfter" type="m.data.standardDate"/>
      <xs:attribute name="status">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="unknown"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac &#xa; valore non atteso in fromDate/@localType"
         test="
            every $v in @localType
            satisfies (
                normalize-space(lower-case($v))='estremocronologicotestuale'
             or normalize-space(lower-case($v))='orarioinizio'
             or normalize-space(lower-case($v))='secolo'
            )
         "/>
         
   </xs:complexType>
   <xs:complexType name="toDate" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="calendar" type="xs:NMTOKEN"/>
      <xs:attribute name="certainty" type="xs:NMTOKEN"/>
      <!-- 0036 0056 ... (xsd) modificata lista con NMTOKEN
      <xs:attribute name="certainty" type="xs:token"/> -->
      <xs:attribute name="era" type="xs:NMTOKEN"/><!--
      <xs:attribute name="notAfter" type="xs:token"/>
      <xs:attribute name="notBefore" type="xs:token"/>
      <xs:attribute name="standardDate" type="xs:token"/>
      -->
      <xs:attribute name="standardDate" type="m.data.standardDate"/>
      <xs:attribute name="notBefore" type="m.data.standardDate"/>
      <xs:attribute name="notAfter" type="m.data.standardDate"/>
      <xs:attribute name="status">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="ongoing"/>
               <xs:enumeration value="unknown"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac &#xa; valore non atteso in toDate/@localType"
         test="
            every $v in @localType
            satisfies (
                normalize-space(lower-case($v))='estremocronologicotestuale'
             or normalize-space(lower-case($v))='orariofine'
             or normalize-space(lower-case($v))='secolo'
            )
         "/>
         
   </xs:complexType>
   <xs:complexType name="part">
      <xs:simpleContent>
         <xs:restriction base="xs:anyType">
            <xs:simpleType>
               <xs:restriction base="xs:string">
                  <xs:pattern value="(.|\n|\r)*\S(.|\n|\r)*"/>
               </xs:restriction>
            </xs:simpleType>
            <xs:attribute name="audience">
               <xs:simpleType>
                  <xs:restriction base="xs:token">
                     <xs:enumeration value="external"/>
                     <xs:enumeration value="internal"/>
                  </xs:restriction>
               </xs:simpleType>
            </xs:attribute>
            <xs:attribute name="id" type="xs:ID"/>
            <xs:attribute name="target" type="xs:IDREFS"/>
            <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
            <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
            <xs:attribute name="localType" type="xs:token"/>
            <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
            <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
            <xs:attribute name="sourceReference" type="xs:IDREFS"/>
            <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
            <xs:anyAttribute namespace="##other" processContents="lax"/>
         </xs:restriction>
      </xs:simpleContent>
   </xs:complexType>
   <xs:complexType name="useDates">
      <xs:choice>
         <xs:element type="eac:date" name="date"/>
         <xs:element type="eac:dateRange" name="dateRange"/>
         <xs:element type="eac:dateSet" name="dateSet"/>
      </xs:choice>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="otherEntityType">
      <xs:sequence>
         <xs:element type="eac:term" name="term" maxOccurs="unbounded"/>
         <xs:choice minOccurs="0">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:element type="eac:placeName"
                     name="placeName"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="demographicDescription">
      <xs:sequence>
         <xs:element type="eac:term" name="term" maxOccurs="unbounded"/>
         <xs:choice minOccurs="0">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:element type="eac:placeName"
                     name="placeName"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="function">
      <xs:sequence>
         <xs:element type="eac:term" name="term" maxOccurs="unbounded"/>
         <xs:choice minOccurs="0">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:element type="eac:placeName"
                     name="placeName"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="languageUsed">
      <xs:sequence>
         <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element type="eac:language" name="language"/>
            <xs:element type="eac:writingSystem" name="writingSystem"/>
         </xs:choice>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="legalStatus">
      <xs:sequence>
         <xs:element type="eac:term" name="term" maxOccurs="unbounded"/>
         <xs:choice minOccurs="0">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:element type="eac:placeName"
                     name="placeName"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="localDescription">
      <xs:sequence>
         <xs:element type="eac:term" name="term" maxOccurs="unbounded"/>
         <xs:choice minOccurs="0">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:element type="eac:placeName"
                     name="placeName"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="mandate">
      <xs:sequence>
         <xs:element type="eac:term" name="term" maxOccurs="unbounded"/>
         <xs:choice minOccurs="0">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:element type="eac:placeName"
                     name="placeName"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="occupation">
      <xs:sequence>
         <xs:element type="eac:term" name="term" maxOccurs="unbounded"/>
         <xs:choice minOccurs="0">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:element type="eac:placeName"
                     name="placeName"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="place">
      <xs:sequence>
         <xs:choice maxOccurs="unbounded">
            <xs:element type="eac:placeName" name="placeName"/>
            <xs:element type="eac:placeRole" name="placeRole"/>
            <xs:element type="eac:geographicCoordinates" name="geographicCoordinates"/>
            <xs:element type="eac:address" name="address"/>
            <xs:element type="eac:contact" name="contact"/>
         </xs:choice>
         <xs:choice minOccurs="0">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:element type="eac:descriptiveNote" name="descriptiveNote" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
      
      <!-- LUOGHI
      
       agente ente         place[@localType='LuogoEnte'    ]  placeRole                      => Giurisdizione, Sede
       agente famiglia     place[@localType='LuogoFamiglia']  placeRole                      => Domicilio, Origine, Residenza, Sede di attività
       agente persona      place[@localType='LuogoPersona' ]  placeRole                      => Domicilio, Morte, Nascita, Residenza, Sede di attività
       agente conservatore place[@localType='Contatti'     ]  contact/@localType             => PEC
       agente conservatore place[@localType='Sedi'         ]  placeRole                      => Principale, Consultazione, Privato
                                                              address/addressLine/@localType => Localita/Frazione, IndirizzoTestuale, NoteIndirizzo, AccessoDisabili, Servizi, CondizioniDiAccesso
                                                              dateSet/@localType             => GiorniDiApertura
                                                                                             dateRange/@localType => lunedì, martedì, mercoledì, giovedì, venerdì, sabato, domenica, ?festivi
                                                                                                                  fromDate/@localType => orarioInizio
                                                                                                                  toDate/@localType   => OrarioFine
                                                              date/@localType                => PeriodoDiChiusura
       evento              place[@localType='LuogoEvento'  ]  placeRole                      => ? default è "Luogo evento"
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac&#xa; cpfDescription/description/places/place/@localType è richiesto"
         test="every $v in . satisfies (@localType)"/>
       <!--
       agente conservatore place[@localType='Contatti'     ]  contact/@localType             => PEC
       -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac&#xa; cpfDescription/description/places/place[@localType]/contact/@localType ammette valori:&#xa;
PEC."
         test="
            every $v in .[@localType]/contact/@localType
            satisfies (
             $v='PEC'
            )
         "/>
       <!--
       agente conservatore place[@localType='Sedi'         ]  placeRole                      => Principale, Consultazione, Privato
       -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0612&#xa; cpfDescription/description/places/place[@localType='Sedi']/placeRole SEDE CONSERVATORE lista chiusa con valori:&#xa;
Principale,
Consultazione,
Privato."
         test="
            every $v in .[@localType[normalize-space(lower-case(.))='sedi']]/placeRole
            satisfies (
                 $v='Principale'
              or $v='Consultazione'
              or $v='Privato'
            )
         "/>
       <!--
       agente conservatore place[@localType='Sedi'         ]  
                                                              address/addressLine/@localType => Localita/Frazione, IndirizzoTestuale, NoteIndirizzo, AccessoDisabili, Servizi, CondizioniDiAccesso
       -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0612&#xa; cpfDescription/description/places/place[@localType='Sedi']/address/addressLine/@localType SEDE CONSERVATORE lista chiusa con valori:&#xa;
Localita/Frazione,
IndirizzoTestuale,
NoteIndirizzo,
AccessoDisabili,
Servizi,
CondizioniDiAccesso."
         test="
            every $v in .[@localType[normalize-space(lower-case(.))='sedi']]/address/addressLine/@localType
            satisfies (
                 normalize-space(lower-case($v))='localita/frazione'
              or normalize-space(lower-case($v))='indirizzotestuale'
              or normalize-space(lower-case($v))='noteindirizzo'
              or normalize-space(lower-case($v))='accessodisabili'
              or normalize-space(lower-case($v))='servizi'
              or normalize-space(lower-case($v))='condizionidiaccesso'
            )
         "/>
      <!--
       agente conservatore place[@localType='Sedi'         ]  
                                                              dateSet/@localType             => GiorniDiApertura
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0612&#xa; cpfDescription/description/places/place[@localType='Sedi']/dateSet/@localType in SEDE CONSERVATORE ammette valori:&#xa;
GiorniDiApertura."
         test="
            every $v in .[@localType[normalize-space(lower-case(.))='sedi']]/dateSet/@localType
            satisfies (
                 normalize-space(lower-case($v))='giornidiapertura'
            )
         "/>
      <!--
       agente conservatore place[@localType='Sedi'         ]  
                                                              date/@localType                => PeriodoDiChiusura
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0612&#xa; cpfDescription/description/places/place[@localType='Sedi']/date/@localType in SEDE CONSERVATORE ammette valori:&#xa;
PeriodoDiChiusura."
         test="
            every $v in .[@localType[normalize-space(lower-case(.))='sedi']]/date/@localType
            satisfies (
                 normalize-space(lower-case($v))='periododichiusura'
            )
         "/>
      <!--
       agente conservatore place[@localType='Sedi'         ]  
                                                              dateSet/@localType             => GiorniDiApertura
                                                                                             dateRange/@localType => lunedì, martedì, mercoledì, giovedì, venerdì, sabato, domenica, ?festivi
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0612&#xa; cpfDescription/description/places/place[@localType='Sedi']/dateSet[@localType]/dateRange/@localType in SEDE CONSERVATORE ammette valori:&#xa;
lunedì,
martedì,
mercoledì,
giovedì,
venerdì,
sabato,
domenica,
festivi."
         test="
            every $v in .[@localType[normalize-space(lower-case(.))='sedi']]/dateSet[@localType]/dateRange/@localType
            satisfies (
                 normalize-space(lower-case($v))='lunedì'
              or normalize-space(lower-case($v))='martedì'
              or normalize-space(lower-case($v))='mercoledì'
              or normalize-space(lower-case($v))='giovedì'
              or normalize-space(lower-case($v))='venerdì'
              or normalize-space(lower-case($v))='sabato'
              or normalize-space(lower-case($v))='domenica'
              or normalize-space(lower-case($v))='festivi'
            )
         "/>
      <!--
       agente conservatore place[@localType='Sedi'         ]  
                                                              dateSet/@localType             => GiorniDiApertura
                                                                                             dateRange/@localType => lunedì, martedì, mercoledì, giovedì, venerdì, sabato, domenica, ?festivi
                                                                                                                  fromDate/@localType => orarioInizio
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0612&#xa; cpfDescription/description/places/place[@localType='Sedi']/dateSet[@localType]/dateRange[@localType]/fromDate/@localType in SEDE CONSERVATORE ammette valori:&#xa;
orarioInizio."
         test="
            every $v in .[@localType[normalize-space(lower-case(.))='sedi']]/dateSet[@localType]/dateRange[@localType]/fromDate/@localType
            satisfies (
                 normalize-space(lower-case($v))='orarioinizio'
            )
         "/>
      <!--
       agente conservatore place[@localType='Sedi'         ]  
                                                              dateSet/@localType             => GiorniDiApertura
                                                                                             dateRange/@localType => lunedì, martedì, mercoledì, giovedì, venerdì, sabato, domenica, ?festivi
                                                                                                                  toDate/@localType => OrarioFine
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0612&#xa; cpfDescription/description/places/place[@localType='Sedi']/dateSet[@localType]/dateRange[@localType]/toDate/@localType in SEDE CONSERVATORE ammette valori:&#xa;
OrarioFine."
         test="
            every $v in .[@localType[normalize-space(lower-case(.))='sedi']]/dateSet[@localType]/dateRange[@localType]/toDate/@localType
            satisfies (
                 normalize-space(lower-case($v))='orariofine'
            )
         "/>
      
      <!-- 0128 "Qualifica della relazione" Lista chiusa: Giurisdizione, Sede.
      -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0128&#xa; cpfDescription/description/places/place[@localType='LuogoEnte']/placeRole/&#xa; 'Qualifica luogo' lista chiusa con valori:&#xa;
Giurisdizione,
Sede."
         test="
            every $v in .[@localType[normalize-space(lower-case(.))='luogoente']]/placeRole
            satisfies 
            (
                $v='Giurisdizione'
             or $v='Sede'
            )
         "/>

      <!-- 0219 "Qualifica luogo" Lista chiusa: Domicilio, Origine, Residenza, Sede di attività. -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0219&#xa; cpfDescription/description/places/place[@localType='LuogoFamiglia']/placeRole/&#xa; 'Qualifica luogo' lista chiusa con valori:&#xa;
Domicilio,
Origine,
Residenza,
Sede di attività."
         test="
            every $v in .[@localType[normalize-space(lower-case(.))='luogofamiglia']]/placeRole
            satisfies 
            (
                $v='Domicilio'
             or $v='Origine'
             or $v='Residenza'
             or $v='Sede di attività'
            )
         "/>
      <!-- 0339 "Qualifica della relazione" Lista chiusa: Domicilio, Morte, Nascita, Residenza, Sede di attività. -->
      <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
         xao:message="=&gt;&#xa;eac 0339&#xa; cpfDescription/description/places/place[@localType='LuogoPersona']/placeRole/&#xa; 'Qualifica luogo' lista chiusa con valori:&#xa;
Domicilio,
Morte,
Nascita,
Residenza,
Sede di attività."
         test="
            every $v in .[@localType[normalize-space(lower-case(.))='luogopersona']]/placeRole
            satisfies 
            (
                $v='Domicilio'
             or $v='Morte'
             or $v='Nascita'
             or $v='Residenza'
             or $v='Sede di attività'
            )
         "/>

   </xs:complexType>
   <xs:complexType name="head" mixed="true">
      <xs:sequence>
         <xs:element type="eac:span" name="span" minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="abstract" mixed="true">
      <xs:choice minOccurs="0" maxOccurs="unbounded">
         <xs:element type="eac:reference" name="reference"/>
         <xs:element type="eac:span" name="span"/>
      </xs:choice>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="list">
      <xs:sequence>
         <xs:element type="eac:head" name="head" minOccurs="0"/>
         <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element type="eac:list" name="list"/>
            <xs:element type="eac:item" name="item"/>
         </xs:choice>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="style" type="xs:normalizedString"/>
      <xs:attribute name="listType">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="ordered"/>
               <xs:enumeration value="unordered"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="chronList">
      <xs:sequence>
         <xs:element type="eac:chronItem" name="chronItem" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="dateSet">
      <xs:sequence>
         <xs:choice>
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
         </xs:choice>
         <xs:choice maxOccurs="unbounded">
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
         </xs:choice>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="targetEntity">
      <xs:sequence>
         <xs:element type="eac:part" name="part" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="targetType" use="required">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="agent"/>
               <xs:enumeration value="corporateBody"/>
               <xs:enumeration value="person"/>
               <xs:enumeration value="family"/>
               <xs:enumeration value="function"/>
               <xs:enumeration value="resource"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="relationType" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="targetRole" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="componentEntry" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="_1">
      <xs:choice>
         <xs:any namespace="##other" processContents="lax"/>
         <xs:any namespace="##local" processContents="lax"/>
      </xs:choice>
   </xs:complexType>
   <xs:complexType name="placeName" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="countryCode" type="xs:NMTOKEN"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="language" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="languageCode" type="xs:NMTOKEN"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="writingSystem" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="scriptCode" type="xs:NMTOKEN"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="placeRole" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="geographicCoordinates">
      <xs:simpleContent>
         <xs:extension base="xs:normalizedString">
            <xs:attribute name="audience">
               <xs:simpleType>
                  <xs:restriction base="xs:token">
                     <xs:enumeration value="external"/>
                     <xs:enumeration value="internal"/>
                  </xs:restriction>
               </xs:simpleType>
            </xs:attribute>
            <xs:attribute name="id" type="xs:ID"/>
            <xs:attribute name="target" type="xs:IDREFS"/>
            <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
            <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
            <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
            <xs:attribute name="sourceReference" type="xs:IDREFS"/>
            <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
            <xs:attribute name="coordinateSystem" use="required" type="xs:token"/>
            <xs:anyAttribute namespace="##other" processContents="lax"/>
            <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
               xao:message="=&gt;&#xa;eac 0626 0627&#xa; geographicCoordinates/@coordinateSystem ammette valore WGS84."
               test="
                   every $v in @coordinateSystem
                   satisfies 
                   (
                       normalize-space(lower-case($v))='wgs84'
                   )
               "/>
            <xs:assert xpathDefaultNamespace="https://archivists.org/ns/eac/v2"
               xao:message="=&gt;&#xa;eac 0626 0627&#xa; geographicCoordinates/@eac-sia:tipoCoordinata è richiesto con valori:&#xa;
Latitudine,
Longitudine."
               test="
                  (.[@eac-sia:tipoCoordinata])
                  and
                  (
                   every $v in @eac-sia:tipoCoordinata
                   satisfies 
                   (
                       normalize-space(lower-case($v))='latitudine'
                    or normalize-space(lower-case($v))='longitudine'
                   )
                  )
               "/>
         </xs:extension>
      </xs:simpleContent>
   </xs:complexType>
   <xs:complexType name="address">
      <xs:sequence>
         <xs:element type="eac:addressLine" name="addressLine" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="contact">
      <xs:sequence>
         <xs:element type="eac:contactLine" name="contactLine" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="item" mixed="true">
      <xs:choice minOccurs="0" maxOccurs="unbounded">
         <xs:element type="eac:reference" name="reference"/>
         <xs:element type="eac:span" name="span"/>
      </xs:choice>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="chronItem">
      <xs:sequence>
         <xs:choice>
            <xs:element type="eac:date" name="date"/>
            <xs:element type="eac:dateRange" name="dateRange"/>
            <xs:element type="eac:dateSet" name="dateSet"/>
         </xs:choice>
         <xs:choice>
            <xs:sequence>
               <xs:element type="eac:event" name="event"/>
               <xs:element type="eac:place" name="place" minOccurs="0"/>
            </xs:sequence>
            <xs:element type="eac:chronItemSet" name="chronItemSet" maxOccurs="unbounded"/>
         </xs:choice>
         <xs:element type="eac:reference"
                     name="reference"
                     minOccurs="0"
                     maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="addressLine" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="addressLineType">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="county"/>
               <xs:enumeration value="country"/>
               <xs:enumeration value="district"/>
               <xs:enumeration value="municipality"/>
               <xs:enumeration value="postBox"/>
               <xs:enumeration value="postalCode"/>
               <xs:enumeration value="region"/>
               <xs:enumeration value="street"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="contactLine" mixed="true">
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="href" type="xs:anyURI"/>
      <xs:attribute name="linkRole" type="xs:anyURI"/>
      <xs:attribute name="linkTitle" type="xs:token"/>
      <xs:attribute name="contactLineType">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="directions"/>
               <xs:enumeration value="email"/>
               <xs:enumeration value="fax"/>
               <xs:enumeration value="homepage"/>
               <xs:enumeration value="mobileNumber"/>
               <xs:enumeration value="phoneNumber"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="event" mixed="true">
      <xs:choice minOccurs="0" maxOccurs="unbounded">
         <xs:element type="eac:reference" name="reference"/>
         <xs:element type="eac:span" name="span"/>
      </xs:choice>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="localType" type="xs:token"/>
      <xs:attribute name="localTypeDeclarationReference" type="xs:IDREFS"/>
      <xs:attribute name="vocabularySource" type="xs:token"/>
      <xs:attribute name="vocabularySourceURI" type="xs:anyURI"/>
      <xs:attribute name="valueURI" type="xs:anyURI"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
   <xs:complexType name="chronItemSet">
      <xs:sequence>
         <xs:element type="eac:event" name="event" maxOccurs="unbounded"/>
         <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element type="eac:place" name="place"/>
            <xs:element type="eac:reference" name="reference"/>
         </xs:choice>
      </xs:sequence>
      <xs:attribute name="audience">
         <xs:simpleType>
            <xs:restriction base="xs:token">
               <xs:enumeration value="external"/>
               <xs:enumeration value="internal"/>
            </xs:restriction>
         </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID"/>
      <xs:attribute name="target" type="xs:IDREFS"/>
      <xs:attribute name="languageOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="scriptOfElement" type="xs:NMTOKEN"/>
      <xs:attribute name="maintenanceEventReference" type="xs:IDREFS"/>
      <xs:attribute name="sourceReference" type="xs:IDREFS"/>
      <xs:attribute name="conventionDeclarationReference" type="xs:IDREFS"/>
      <xs:anyAttribute namespace="##other" processContents="lax"/>
   </xs:complexType>
</xs:schema>
